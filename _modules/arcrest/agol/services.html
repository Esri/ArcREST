<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>arcrest.agol.services &mdash; ArcREST 3.5.4 documentation</title>
    
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '3.5.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="ArcREST 3.5.4 documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">ArcREST 3.5.4 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for arcrest.agol.services</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>

<span class="sd">.. module:: services.py</span>
<span class="sd">   :platform: Windows, Linux</span>
<span class="sd">   :synopsis: Represents functions/classes used to control Feature Services,</span>
<span class="sd">              Feature Service Layer, Map Service, etc...</span>

<span class="sd">.. moduleauthor:: Esri</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">uuid</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">types</span>
<span class="kn">from</span> <span class="nn">re</span> <span class="kn">import</span> <span class="n">search</span>
<span class="kn">from</span> <span class="nn">..packages.six.moves</span> <span class="kn">import</span> <span class="n">urllib_parse</span> <span class="k">as</span> <span class="n">urlparse</span>
<span class="c1">#from six.moves import urllib_parse as urlparse</span>
<span class="kn">from</span> <span class="nn">._uploads</span> <span class="kn">import</span> <span class="n">Uploads</span>
<span class="kn">from</span> <span class="nn">..security</span> <span class="kn">import</span> <span class="n">security</span>
<span class="kn">from</span> <span class="nn">.._abstract</span> <span class="kn">import</span> <span class="n">abstract</span>
<span class="kn">from</span> <span class="nn">..common.filters</span> <span class="kn">import</span> <span class="n">LayerDefinitionFilter</span><span class="p">,</span> <span class="n">GeometryFilter</span><span class="p">,</span> <span class="n">TimeFilter</span>
<span class="kn">from</span> <span class="nn">..common.general</span> <span class="kn">import</span> <span class="n">FeatureSet</span>
<span class="kn">from</span> <span class="nn">..common</span> <span class="kn">import</span> <span class="n">filters</span>
<span class="kn">from</span> <span class="nn">..common.geometry</span> <span class="kn">import</span> <span class="n">SpatialReference</span>
<span class="kn">from</span> <span class="nn">..common.general</span> <span class="kn">import</span> <span class="n">_date_handler</span><span class="p">,</span> <span class="n">Feature</span>
<span class="kn">from</span> <span class="nn">..common.spatial</span> <span class="kn">import</span> <span class="n">scratchFolder</span><span class="p">,</span> <span class="n">scratchGDB</span><span class="p">,</span> <span class="n">json_to_featureclass</span>
<span class="kn">from</span> <span class="nn">..common.spatial</span> <span class="kn">import</span> <span class="n">get_OID_field</span><span class="p">,</span> <span class="n">get_records_with_attachments</span>
<span class="kn">from</span> <span class="nn">..common.spatial</span> <span class="kn">import</span> <span class="n">create_feature_layer</span><span class="p">,</span> <span class="n">merge_feature_class</span>
<span class="kn">from</span> <span class="nn">..common.spatial</span> <span class="kn">import</span> <span class="n">featureclass_to_json</span><span class="p">,</span> <span class="n">create_feature_class</span>
<span class="kn">from</span> <span class="nn">..common.spatial</span> <span class="kn">import</span> <span class="n">get_attachment_data</span>
<span class="kn">from</span> <span class="nn">..common</span> <span class="kn">import</span> <span class="n">geometry</span>
<span class="kn">from</span> <span class="nn">..hostedservice</span> <span class="kn">import</span> <span class="n">AdminFeatureService</span><span class="p">,</span> <span class="n">AdminFeatureServiceLayer</span>
<span class="kn">from</span> <span class="nn">.._abstract.abstract</span> <span class="kn">import</span> <span class="n">BaseSecurityHandler</span><span class="p">,</span> <span class="n">BaseAGOLClass</span>

<span class="c1">########################################################################</span>
<div class="viewcode-block" id="FeatureService"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService">[docs]</a><span class="k">class</span> <span class="nc">FeatureService</span><span class="p">(</span><span class="n">abstract</span><span class="o">.</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; contains information about a feature service &quot;&quot;&quot;</span>
    <span class="n">_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serviceDescription</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasVersionedData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsDisconnectedEditing</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasStaticData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedQueryFormats</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_spatialReference</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_initialExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fullExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_allowGeometryUpdates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_units</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_syncEnabled</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_syncCapabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_editorTrackingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_documentInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_layers</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_tables</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_enableZDefaults</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_zDefault</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_size</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_xssPreventionInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_editingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_port</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_securityHandler</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serverURL</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_json</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_json_dict</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsApplyEditsWithGlobalIds</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serviceItemId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">url</span><span class="p">,</span>
                 <span class="n">securityHandler</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="s1">&#39;is_portal&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">securityHandler</span><span class="o">.</span><span class="n">is_portal</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="s1">&#39;portalServerHandler&#39;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span><span class="o">.</span><span class="n">portalServerHandler</span><span class="p">(</span><span class="n">serverUrl</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>


        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; loads the data into the class &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">}</span>

        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                              <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                              <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                              <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json_dict</span> <span class="o">=</span> <span class="n">json_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_json_dict</span><span class="p">,</span>
                                <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;layers&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getLayers</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;tables&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_getTables</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - attribute not implemented in Feature Service.&quot;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns object as string &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; iterator generator for public values/properties</span>
<span class="sd">            It only returns the properties that are public.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinFunctionType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinMethodType</span><span class="p">))</span>
                      <span class="p">]</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">att</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">att</span><span class="p">))</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the security handler &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@securityHandler.setter</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the security handler &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">abstract</span><span class="o">.</span><span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">AGOLTokenSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">username</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">_password</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">token_url</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">OAuthSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">editingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  returns the editing information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editingInfo</span>

    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">xssPreventionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the xssPreventionInfo information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xssPreventionInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xssPreventionInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the size parameter&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.refresh_service"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.refresh_service">[docs]</a>    <span class="k">def</span> <span class="nf">refresh_service</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; repopulates the properties of the service &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the max record count&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportedQueryFormats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the supported query formats &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns a list of capabilities &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsApplyEditsWithGlobalIds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the supportsApplyEditsWithGlobalIds property&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsApplyEditsWithGlobalIds</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsApplyEditsWithGlobalIds</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">serviceItemId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the serviceItemId&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceItemId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceItemId</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">copyrightText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the copyright text &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">spatialReference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the spatial reference &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initialExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the initial extent of the feature service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fullExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the full extent of the feature service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allowGeometryUpdates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; informs the user if the data allows geometry updates &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the measurement unit &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">syncEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; informs the user if sync of data can be performed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncEnabled</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncEnabled</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uploads</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the class to perform the upload function.  it will</span>
<span class="sd">        only return the uploads class if syncEnabled is True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">syncEnabled</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Uploads</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/uploads&quot;</span><span class="p">,</span>
                           <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                           <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                           <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">None</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">syncCapabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; type of sync that can be performed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncCapabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncCapabilities</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">editorTrackingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the editor tracking information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editorTrackingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editorTrackingInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">documentInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the document information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documentInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documentInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_getLayers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets layers for the featuer service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">}</span>
            <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                  <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                  <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                  <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> \
               <span class="n">json_dict</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;layers&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="p">[</span><span class="s1">&#39;layers&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FeatureLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">l</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                                                     <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                                     <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                     <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">))</span>
                    <span class="k">del</span> <span class="n">l</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_getTables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets layers for the featuer service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">}</span>
            <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                     <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                     <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                     <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span> <span class="ow">and</span> \
               <span class="n">json_dict</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s2">&quot;tables&quot;</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="p">[</span><span class="s1">&#39;tables&#39;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FeatureLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">l</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">],</span>
                                                     <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                                     <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                     <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">))</span>
                    <span class="k">del</span> <span class="n">l</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the url for the feature service&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">layers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns a list of layer objects &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getLayers</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the tables  &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_getTables</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">enableZDefaults</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the enable Z defaults value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enableZDefaults</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_enableZDefaults</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">zDefault</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the Z default value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zDefault</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zDefault</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasStaticData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean for has statistic data &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span>

    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the map service current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">administration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the hostservice object to manage the back-end functions&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">search</span><span class="p">(</span><span class="s2">&quot;/rest/&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span>
        <span class="n">addText</span> <span class="o">=</span> <span class="s2">&quot;admin/&quot;</span>
        <span class="n">part1</span> <span class="o">=</span> <span class="n">url</span><span class="p">[:</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">part2</span> <span class="o">=</span> <span class="n">url</span><span class="p">[</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]:]</span>
        <span class="n">adminURL</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">part1</span><span class="p">,</span> <span class="n">addText</span><span class="p">,</span> <span class="n">part2</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">AdminFeatureService</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                            <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">serviceDescription</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the serviceDescription of the map service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasVersionedData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean for versioned data &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasVersionedData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasVersionedData</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsDisconnectedEditing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean is disconnecting editted supported &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsDisconnectedEditing</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsDisconnectedEditing</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.query"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.query">[docs]</a>    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
              <span class="n">layerDefsFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">geometryFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">timeFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">returnGeometry</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">returnIdsOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnCountOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnZ</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnM</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">outSR</span><span class="o">=</span><span class="bp">None</span>
              <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The Query operation is performed on a feature service resource</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">qurl</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/query&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;returnGeometry&quot;</span><span class="p">:</span> <span class="n">returnGeometry</span><span class="p">,</span>
                  <span class="s2">&quot;returnIdsOnly&quot;</span><span class="p">:</span> <span class="n">returnIdsOnly</span><span class="p">,</span>
                  <span class="s2">&quot;returnCountOnly&quot;</span><span class="p">:</span> <span class="n">returnCountOnly</span><span class="p">,</span>
                  <span class="s2">&quot;returnZ&quot;</span><span class="p">:</span> <span class="n">returnZ</span><span class="p">,</span>
                  <span class="s2">&quot;returnM&quot;</span> <span class="p">:</span> <span class="n">returnM</span><span class="p">}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">layerDefsFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">layerDefsFilter</span><span class="p">,</span> <span class="n">LayerDefinitionFilter</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;layerDefs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layerDefsFilter</span><span class="o">.</span><span class="n">filter</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">geometryFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometryFilter</span><span class="p">,</span> <span class="n">GeometryFilter</span><span class="p">):</span>
            <span class="n">gf</span> <span class="o">=</span> <span class="n">geometryFilter</span><span class="o">.</span><span class="n">filter</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;spatialRel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;spatialRel&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">outSR</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">outSR</span><span class="p">,</span> <span class="n">geometry</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;outSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">outSR</span><span class="o">.</span><span class="n">asDictionary</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">timeFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">timeFilter</span><span class="p">,</span> <span class="n">TimeFilter</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeFilter</span><span class="o">.</span><span class="n">filter</span>
        <span class="n">res</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">qurl</span><span class="p">,</span>
                         <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                         <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                         <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                         <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">returnIdsOnly</span> <span class="o">==</span> <span class="bp">False</span> <span class="ow">and</span> <span class="n">returnCountOnly</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">jd</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">FeatureSet</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">lyr</span><span class="p">))</span> <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">jd</span><span class="p">[</span><span class="s1">&#39;layers&#39;</span><span class="p">]]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="k">return</span> <span class="p">[</span><span class="n">FeatureSet</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">lyr</span><span class="p">))</span> <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;layers&#39;</span><span class="p">]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">res</span>
        <span class="k">return</span> <span class="n">res</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.query_related_records"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.query_related_records">[docs]</a>    <span class="k">def</span> <span class="nf">query_related_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">objectIds</span><span class="p">,</span>
                              <span class="n">relationshipId</span><span class="p">,</span>
                              <span class="n">outFields</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
                              <span class="n">definitionExpression</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">returnGeometry</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">maxAllowableOffset</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">geometryPrecision</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">outWKID</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">returnZ</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                              <span class="n">returnM</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The Query operation is performed on a feature service layer</span>
<span class="sd">           resource. The result of this operation are feature sets grouped</span>
<span class="sd">           by source layer/table object IDs. Each feature set contains</span>
<span class="sd">           Feature objects including the values for the fields requested by</span>
<span class="sd">           the user. For related layers, if you request geometry</span>
<span class="sd">           information, the geometry of each feature is also returned in</span>
<span class="sd">           the feature set. For related tables, the feature set does not</span>
<span class="sd">           include geometries.</span>
<span class="sd">           Inputs:</span>
<span class="sd">              objectIds - the object IDs of the table/layer to be queried</span>
<span class="sd">              relationshipId - The ID of the relationship to be queried.</span>
<span class="sd">              outFields - the list of fields from the related table/layer</span>
<span class="sd">                          to be included in the returned feature set. This</span>
<span class="sd">                          list is a comma delimited list of field names. If</span>
<span class="sd">                          you specify the shape field in the list of return</span>
<span class="sd">                          fields, it is ignored. To request geometry, set</span>
<span class="sd">                          returnGeometry to true.</span>
<span class="sd">                          You can also specify the wildcard &quot;*&quot; as the</span>
<span class="sd">                          value of this parameter. In this case, the result</span>
<span class="sd">                          s will include all the field values.</span>
<span class="sd">              definitionExpression - The definition expression to be</span>
<span class="sd">                                     applied to the related table/layer.</span>
<span class="sd">                                     From the list of objectIds, only those</span>
<span class="sd">                                     records that conform to this</span>
<span class="sd">                                     expression are queried for related</span>
<span class="sd">                                     records.</span>
<span class="sd">              returnGeometry - If true, the feature set includes the</span>
<span class="sd">                               geometry associated with each feature. The</span>
<span class="sd">                               default is true.</span>
<span class="sd">              maxAllowableOffset - This option can be used to specify the</span>
<span class="sd">                                   maxAllowableOffset to be used for</span>
<span class="sd">                                   generalizing geometries returned by the</span>
<span class="sd">                                   query operation. The maxAllowableOffset</span>
<span class="sd">                                   is in the units of the outSR. If outSR</span>
<span class="sd">                                   is not specified, then</span>
<span class="sd">                                   maxAllowableOffset is assumed to be in</span>
<span class="sd">                                   the unit of the spatial reference of the</span>
<span class="sd">                                   map.</span>
<span class="sd">              geometryPrecision - This option can be used to specify the</span>
<span class="sd">                                  number of decimal places in the response</span>
<span class="sd">                                  geometries.</span>
<span class="sd">              outWKID - The spatial reference of the returned geometry.</span>
<span class="sd">              gdbVersion - The geodatabase version to query. This parameter</span>
<span class="sd">                           applies only if the isDataVersioned property of</span>
<span class="sd">                           the layer queried is true.</span>
<span class="sd">              returnZ - If true, Z values are included in the results if</span>
<span class="sd">                        the features have Z values. Otherwise, Z values are</span>
<span class="sd">                        not returned. The default is false.</span>
<span class="sd">              returnM - If true, M values are included in the results if</span>
<span class="sd">                        the features have M values. Otherwise, M values are</span>
<span class="sd">                        not returned. The default is false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;objectIds&quot;</span> <span class="p">:</span> <span class="n">objectIds</span><span class="p">,</span>
            <span class="s2">&quot;relationshipId&quot;</span> <span class="p">:</span> <span class="n">relationshipId</span><span class="p">,</span>
            <span class="s2">&quot;outFields&quot;</span> <span class="p">:</span> <span class="n">outFields</span><span class="p">,</span>
            <span class="s2">&quot;returnGeometry&quot;</span> <span class="p">:</span> <span class="n">returnGeometry</span><span class="p">,</span>
            <span class="s2">&quot;returnM&quot;</span> <span class="p">:</span> <span class="n">returnM</span><span class="p">,</span>
            <span class="s2">&quot;returnZ&quot;</span> <span class="p">:</span> <span class="n">returnZ</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">gdbVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;gdbVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdbVersion</span>
        <span class="k">if</span> <span class="n">definitionExpression</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;definitionExpression&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">definitionExpression</span>
        <span class="k">if</span> <span class="n">outWKID</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;outSR&#39;</span><span class="p">]</span> <span class="o">=</span><span class="n">geometry</span><span class="o">.</span><span class="n">SpatialReference</span><span class="p">(</span><span class="n">outWKID</span><span class="p">)</span><span class="o">.</span><span class="n">asDictionary</span>
        <span class="k">if</span> <span class="n">maxAllowableOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;maxAllowableOffset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxAllowableOffset</span>
        <span class="k">if</span> <span class="n">geometryPrecision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometryPrecision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geometryPrecision</span>
        <span class="n">quURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/queryRelatedRecords&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">quURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                        <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                        <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">replicas</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns all the replicas for a feature service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>

        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/replicas&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                         <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                         <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                         <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.unRegisterReplica"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.unRegisterReplica">[docs]</a>    <span class="k">def</span> <span class="nf">unRegisterReplica</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replica_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           removes a replica from a feature service</span>
<span class="sd">           Inputs:</span>
<span class="sd">             replica_id - The replicaID returned by the feature service</span>
<span class="sd">                          when the replica was created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;replicaID&quot;</span> <span class="p">:</span> <span class="n">replica_id</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/unRegisterReplica&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                          <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                          <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                          <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.replicaInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.replicaInfo">[docs]</a>    <span class="k">def</span> <span class="nf">replicaInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">replica_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The replica info resources lists replica metadata for a specific</span>
<span class="sd">           replica.</span>
<span class="sd">           Inputs:</span>
<span class="sd">              replica_id - The replicaID returned by the feature service</span>
<span class="sd">                           when the replica was created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/replicas/&quot;</span> <span class="o">+</span> <span class="n">replica_id</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                            <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.createReplica"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.createReplica">[docs]</a>    <span class="k">def</span> <span class="nf">createReplica</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">replicaName</span><span class="p">,</span>
                      <span class="n">layers</span><span class="p">,</span>
                      <span class="n">layerQueries</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">geometryFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">replicaSR</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">transportType</span><span class="o">=</span><span class="s2">&quot;esriTransportTypeUrl&quot;</span><span class="p">,</span>
                      <span class="n">returnAttachments</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">returnAttachmentsDatabyURL</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">async</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">attachmentsSyncDirection</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                      <span class="n">syncModel</span><span class="o">=</span><span class="s2">&quot;none&quot;</span><span class="p">,</span>
                      <span class="n">dataFormat</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
                      <span class="n">replicaOptions</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">wait</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">out_path</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The createReplica operation is performed on a feature service</span>
<span class="sd">        resource. This operation creates the replica between the feature</span>
<span class="sd">        service and a client based on a client-supplied replica definition.</span>
<span class="sd">        It requires the Sync capability. See Sync overview for more</span>
<span class="sd">        information on sync. The response for createReplica includes</span>
<span class="sd">        replicaID, server generation number, and data similar to the</span>
<span class="sd">        response from the feature service query operation.</span>
<span class="sd">        The createReplica operation returns a response of type</span>
<span class="sd">        esriReplicaResponseTypeData, as the response has data for the</span>
<span class="sd">        layers in the replica. If the operation is called to register</span>
<span class="sd">        existing data by using replicaOptions, the response type will be</span>
<span class="sd">        esriReplicaResponseTypeInfo, and the response will not contain data</span>
<span class="sd">        for the layers in the replica.</span>

<span class="sd">        Inputs:</span>
<span class="sd">           replicaName - name of the replica</span>
<span class="sd">           layers - layers to export</span>
<span class="sd">           layerQueries - In addition to the layers and geometry parameters, the layerQueries</span>
<span class="sd">            parameter can be used to further define what is replicated. This</span>
<span class="sd">            parameter allows you to set properties on a per layer or per table</span>
<span class="sd">            basis. Only the properties for the layers and tables that you want</span>
<span class="sd">            changed from the default are required.</span>
<span class="sd">            Example:</span>
<span class="sd">             layerQueries = {&quot;0&quot;:{&quot;queryOption&quot;: &quot;useFilter&quot;, &quot;useGeometry&quot;: true,</span>
<span class="sd">             &quot;where&quot;: &quot;requires_inspection = Yes&quot;}}</span>
<span class="sd">           geometryFilter - Geospatial filter applied to the replica to</span>
<span class="sd">            parse down data output.</span>
<span class="sd">           returnAttachments - If true, attachments are added to the replica and returned in the</span>
<span class="sd">            response. Otherwise, attachments are not included.</span>
<span class="sd">           returnAttachmentDatabyURL -  If true, a reference to a URL will be provided for each</span>
<span class="sd">            attachment returned from createReplica. Otherwise,</span>
<span class="sd">            attachments are embedded in the response.</span>
<span class="sd">           replicaSR - the spatial reference of the replica geometry.</span>
<span class="sd">           transportType -  The transportType represents the response format. If the</span>
<span class="sd">            transportType is esriTransportTypeUrl, the JSON response is contained in a file,</span>
<span class="sd">            and the URL link to the file is returned. Otherwise, the JSON object is returned</span>
<span class="sd">            directly. The default is esriTransportTypeUrl.</span>
<span class="sd">            If async is true, the results will always be returned as if transportType is</span>
<span class="sd">            esriTransportTypeUrl. If dataFormat is sqlite, the transportFormat will always be</span>
<span class="sd">            esriTransportTypeUrl regardless of how the parameter is set.</span>
<span class="sd">            Values: esriTransportTypeUrl | esriTransportTypeEmbedded</span>
<span class="sd">           returnAttachments - If true, attachments are added to the replica and returned in</span>
<span class="sd">            the response. Otherwise, attachments are not included. The default is false. This</span>
<span class="sd">            parameter is only applicable if the feature service has attachments.</span>
<span class="sd">           returnAttachmentsDatabyURL -  If true, a reference to a URL will be provided for</span>
<span class="sd">            each attachment returned from createReplica. Otherwise, attachments are embedded</span>
<span class="sd">            in the response. The default is true. This parameter is only applicable if the</span>
<span class="sd">            feature service has attachments and if returnAttachments is true.</span>
<span class="sd">           attachmentsSyncDirection - Client can specify the attachmentsSyncDirection when</span>
<span class="sd">            creating a replica. AttachmentsSyncDirection is currently a createReplica property</span>
<span class="sd">            and cannot be overridden during sync.</span>
<span class="sd">            Values: none, upload, bidirectional</span>
<span class="sd">           async - If true, the request is processed as an asynchronous job, and a URL is</span>
<span class="sd">            returned that a client can visit to check the status of the job. See the topic on</span>
<span class="sd">            asynchronous usage for more information. The default is false.</span>
<span class="sd">           syncModel - Client can specify the attachmentsSyncDirection when creating a replica.</span>
<span class="sd">            AttachmentsSyncDirection is currently a createReplica property and cannot be</span>
<span class="sd">            overridden during sync.</span>
<span class="sd">           dataFormat - The format of the replica geodatabase returned in the response. The</span>
<span class="sd">            default is json.</span>
<span class="sd">            Values: filegdb, json, sqlite, shapefile</span>
<span class="sd">           replicaOptions - This parameter instructs the createReplica operation to create a</span>
<span class="sd">            new replica based on an existing replica definition (refReplicaId). It can be used</span>
<span class="sd">            to specify parameters for registration of existing data for sync. The operation</span>
<span class="sd">            will create a replica but will not return data. The responseType returned in the</span>
<span class="sd">            createReplica response will be esriReplicaResponseTypeInfo.</span>
<span class="sd">           wait - if async, wait to pause the process until the async operation is completed.</span>
<span class="sd">           out_path - folder path to save the file</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">syncEnabled</span> <span class="o">==</span> <span class="bp">False</span> <span class="ow">and</span> <span class="s2">&quot;Extract&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">capabilities</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/createReplica&quot;</span>
        <span class="n">dataformat</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;filegdb&quot;</span><span class="p">,</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span> <span class="s2">&quot;sqlite&quot;</span><span class="p">,</span> <span class="s2">&quot;shapefile&quot;</span><span class="p">]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;replicaName&quot;</span><span class="p">:</span> <span class="n">replicaName</span><span class="p">,</span>
                  <span class="s2">&quot;returnAttachments&quot;</span><span class="p">:</span> <span class="n">returnAttachments</span><span class="p">,</span>
                  <span class="s2">&quot;returnAttachmentsDatabyURL&quot;</span><span class="p">:</span> <span class="n">returnAttachmentsDatabyURL</span><span class="p">,</span>
                  <span class="s2">&quot;attachmentsSyncDirection&quot;</span> <span class="p">:</span> <span class="n">attachmentsSyncDirection</span><span class="p">,</span>
                  <span class="s2">&quot;async&quot;</span> <span class="p">:</span> <span class="n">async</span><span class="p">,</span>
                  <span class="s2">&quot;syncModel&quot;</span> <span class="p">:</span> <span class="n">syncModel</span><span class="p">,</span>
                  <span class="s2">&quot;layers&quot;</span> <span class="p">:</span> <span class="n">layers</span>
                  <span class="p">}</span>
        <span class="k">if</span> <span class="n">dataFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="n">dataformat</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;dataFormat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dataFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid dataFormat&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layerQueries</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;layerQueries&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layerQueries</span>
        <span class="k">if</span> <span class="n">geometryFilter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometryFilter</span><span class="p">,</span> <span class="n">GeometryFilter</span><span class="p">):</span>
            <span class="n">params</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">geometryFilter</span><span class="o">.</span><span class="n">filter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">replicaSR</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;replicaSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">replicaSR</span>
        <span class="k">if</span> <span class="n">replicaOptions</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;replicaOptions&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">replicaOptions</span>
        <span class="k">if</span> <span class="n">transportType</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;transportType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">transportType</span>

        <span class="k">if</span> <span class="n">async</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wait</span><span class="p">:</span>
                <span class="n">exportJob</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                          <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                          <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                          <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                          <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
                <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replicaStatus</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">exportJob</span><span class="p">[</span><span class="s1">&#39;statusUrl&#39;</span><span class="p">])</span>
                <span class="k">while</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">!=</span> <span class="s2">&quot;completed&quot;</span><span class="p">:</span>
                    <span class="n">status</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">replicaStatus</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">exportJob</span><span class="p">[</span><span class="s1">&#39;statusUrl&#39;</span><span class="p">])</span>
                    <span class="k">if</span> <span class="n">status</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;failed&quot;</span><span class="p">:</span>
                        <span class="k">return</span> <span class="n">status</span>

                <span class="n">res</span> <span class="o">=</span> <span class="n">status</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                     <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                     <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                     <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                     <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                                <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>


        <span class="k">if</span> <span class="n">out_path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">out_path</span><span class="p">):</span>
            <span class="n">dlURL</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="s1">&#39;resultUrl&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>

                <span class="n">dlURL</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;resultUrl&quot;</span><span class="p">]</span>
            <span class="k">elif</span> <span class="s1">&#39;responseUrl&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="n">dlURL</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&quot;responseUrl&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">dlURL</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">dlURL</span><span class="p">,</span>
                                 <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">out_folder</span><span class="o">=</span><span class="n">out_path</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">res</span>
        <span class="k">elif</span> <span class="n">res</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span>
        <span class="k">return</span> <span class="bp">None</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.synchronizeReplica"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.synchronizeReplica">[docs]</a>    <span class="k">def</span> <span class="nf">synchronizeReplica</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                           <span class="n">replicaID</span><span class="p">,</span>
                           <span class="n">transportType</span><span class="o">=</span><span class="s2">&quot;esriTransportTypeUrl&quot;</span><span class="p">,</span>
                           <span class="n">replicaServerGen</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">returnIdsForAdds</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                           <span class="n">edits</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">returnAttachmentDatabyURL</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                           <span class="n">async</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                           <span class="n">syncDirection</span><span class="o">=</span><span class="s2">&quot;snapshot&quot;</span><span class="p">,</span>
                           <span class="n">syncLayers</span><span class="o">=</span><span class="s2">&quot;perReplica&quot;</span><span class="p">,</span>
                           <span class="n">editsUploadID</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">editsUploadFormat</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                           <span class="n">dataFormat</span><span class="o">=</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
                           <span class="n">rollbackOnFailure</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        TODO: implement synchronize replica</span>
<span class="sd">        http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#//02r3000000vv000000</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;replicaID&quot;</span> <span class="p">:</span> <span class="n">replicaID</span><span class="p">,</span>
            <span class="s2">&quot;transportType&quot;</span> <span class="p">:</span> <span class="n">transportType</span><span class="p">,</span>
            <span class="s2">&quot;dataFormat&quot;</span> <span class="p">:</span> <span class="n">dataFormat</span><span class="p">,</span>
            <span class="s2">&quot;rollbackOnFailure&quot;</span> <span class="p">:</span> <span class="n">rollbackOnFailure</span><span class="p">,</span>
            <span class="s2">&quot;async&quot;</span> <span class="p">:</span> <span class="n">async</span><span class="p">,</span>
            <span class="s2">&quot;returnIdsForAdds&quot;</span><span class="p">:</span> <span class="n">returnIdsForAdds</span><span class="p">,</span>
            <span class="s2">&quot;syncDirection&quot;</span> <span class="p">:</span> <span class="n">syncDirection</span><span class="p">,</span>
            <span class="s2">&quot;returnAttachmentDatabyURL&quot;</span> <span class="p">:</span> <span class="n">returnAttachmentDatabyURL</span>
        <span class="p">}</span>
        <span class="k">return</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureService.replicaStatus"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureService.replicaStatus">[docs]</a>    <span class="k">def</span> <span class="nf">replicaStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the replica status when exported async set to True&quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">url</span> <span class="o">+</span> <span class="s2">&quot;/status&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                            <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                            <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div></div>
<span class="c1">########################################################################</span>
<div class="viewcode-block" id="FeatureLayer"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer">[docs]</a><span class="k">class</span> <span class="nc">FeatureLayer</span><span class="p">(</span><span class="n">abstract</span><span class="o">.</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       This contains information about a feature service&#39;s layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_objectIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_allowGeometryUpdates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_globalIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_token_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_type</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_definitionExpression</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_geometryType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasZ</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasM</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_parentLayer</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_subLayers</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_minScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_effectiveMinScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_effectiveMaxScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_defaultVisibility</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_extent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_timeInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_drawingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasAttachments</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_htmlPopupType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_displayField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_typeIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fields</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_types</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># sub-types</span>
    <span class="n">_relationships</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_canModifyLayer</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsValidateSql</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsCoordinatesQuantization</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsStatistics</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsAdvancedQueries</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasLabels</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_canScaleSymbols</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedQueryFormats</span> <span class="o">=</span>  <span class="bp">None</span>
    <span class="n">_isDataVersioned</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_ownershipBasedAccessControlForFeatures</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_useStandardizedQueries</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_templates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_indexes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasStaticData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsRollbackOnFailureParameter</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_advancedQueryCapabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_editingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_port</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_securityHandler</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsCalculate</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsAttachmentsByUploadId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_editFieldsInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serverURL</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsValidateSql</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsCoordinatesQuantization</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsApplyEditsWithGlobalIds</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serviceItemId</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_json</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_json_dict</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_standardMaxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_tileMaxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCountFactor</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
                 <span class="n">securityHandler</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="s1">&#39;is_portal&#39;</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">securityHandler</span><span class="o">.</span><span class="n">is_portal</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="s1">&#39;portalServerHandler&#39;</span><span class="p">):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span><span class="o">.</span><span class="n">portalServerHandler</span><span class="p">(</span><span class="n">serverUrl</span><span class="o">=</span><span class="n">url</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>

        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initializes the service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                 <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json_dict</span> <span class="o">=</span> <span class="n">json_dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_json</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_dict</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - attribute not implemented in Feature Layer.&quot;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span> <span class="o">=</span> <span class="n">FeatureService</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">),</span>
                <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span> <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.refresh"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;refreshes all the properties of the service&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns object as string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_json</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; iterator generator for public values/properties</span>
<span class="sd">            It only returns the properties that are public.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinFunctionType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinMethodType</span><span class="p">))</span>
                      <span class="p">]</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">att</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">att</span><span class="p">))</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">standardMaxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the standardMaxRecordCount for the feature layer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_standardMaxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_standardMaxRecordCount</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tileMaxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the tileMaxRecordCount for the feature layer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileMaxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileMaxRecordCount</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxRecordCountFactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the maxRecordCountFactor for the feature layer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCountFactor</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCountFactor</span>

    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the url for the feature layer&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsApplyEditsWithGlobalIds</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the url for the feature layer&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsApplyEditsWithGlobalIds</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsApplyEditsWithGlobalIds</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">serviceItemId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the service item id&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceItemId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceItemId</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">administration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the hostservice object to manage the back-end functions&quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span>
        <span class="n">res</span> <span class="o">=</span> <span class="n">search</span><span class="p">(</span><span class="s2">&quot;/rest/&quot;</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span>
        <span class="n">addText</span> <span class="o">=</span> <span class="s2">&quot;admin/&quot;</span>
        <span class="n">part1</span> <span class="o">=</span> <span class="n">url</span><span class="p">[:</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">part2</span> <span class="o">=</span> <span class="n">url</span><span class="p">[</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]:]</span>
        <span class="n">adminURL</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s%s%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">part1</span><span class="p">,</span> <span class="n">addText</span><span class="p">,</span> <span class="n">part2</span><span class="p">)</span>

        <span class="n">res</span> <span class="o">=</span> <span class="n">AdminFeatureServiceLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">adminURL</span><span class="p">,</span>
                                       <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                       <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                       <span class="n">initialize</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsValidateSql</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the supports calculate values &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsValidateSql</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsValidateSql</span>

    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsCoordinatesQuantization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the supports calculate values &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsCoordinatesQuantization</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsCoordinatesQuantization</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsCalculate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the supports calculate values &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsCalculate</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsCalculate</span>
    <span class="c1">#----------------------------------------------------------------------</span>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">editFieldsInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns edit field info &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editFieldsInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editFieldsInfo</span>
        <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsAttachmentsByUploadId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns is supports attachments by uploads id &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAttachmentsByUploadId</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAttachmentsByUploadId</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">editingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the edit information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editingInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">advancedQueryCapabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the advanced query capabilities &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_advancedQueryCapabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_advancedQueryCapabilities</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsRollbackOnFailureParameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if rollback on failure supported &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsRollbackOnFailureParameter</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsRollbackOnFailureParameter</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasStaticData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;boolean T/F if static data is present &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">indexes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the indexes&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">templates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets the template &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_templates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_templates</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">allowGeometryUpdates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean if geometry updates are allowed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">globalIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the global id field &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span>

    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">objectIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectIdField</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the id &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the name &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the type &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the layer&#39;s description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">definitionExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the definitionExpression&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_definitionExpression</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_definitionExpression</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">geometryType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the geometry type&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_geometryType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_geometryType</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasZ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if it has a Z value or not &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasZ</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasZ</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if it has a m value or not &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasM</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasM</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">copyrightText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the copyright text &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">parentLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns information about the parent &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">subLayers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns sublayers for layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subLayers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subLayers</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">minScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; minimum scale layer will show &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the max scale &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">effectiveMinScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the effective minimum scale value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMinScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMinScale</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">effectiveMaxScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the effective maximum scale value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMaxScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMaxScale</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">defaultVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the default visibility of the layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultVisibility</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultVisibility</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the extent &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extent</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">timeInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the time information about the layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeInfo</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">drawingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the symbol information about the layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawingInfo</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasAttachments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; boolean that tells if attachments are associated with layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasAttachments</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasAttachments</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">htmlPopupType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the popup type  &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_htmlPopupType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_htmlPopupType</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">displayField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the primary display field &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_displayField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_displayField</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">typeIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the type Id field &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typeIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typeIdField</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the layer&#39;s fields &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the types &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_types</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_types</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">relationships</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the relationships for the layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the maximum returned records &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">canModifyLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean to say if layer can be modified &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canModifyLayer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canModifyLayer</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;  boolean to if supports statistics &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsStatistics</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsStatistics</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportsAdvancedQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; boolean value if advanced queries is supported &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAdvancedQueries</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAdvancedQueries</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">hasLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if layer has labels on or not &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasLabels</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasLabels</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">canScaleSymbols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; states if symbols can scale &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canScaleSymbols</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canScaleSymbols</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; operations that can be performed on layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportedQueryFormats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns supported query formats &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">isDataVersioned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean if data is in version control &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isDataVersioned</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isDataVersioned</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ownershipBasedAccessControlForFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns value for owernship based access control &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ownershipBasedAccessControlForFeatures</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ownershipBasedAccessControlForFeatures</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">useStandardizedQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns value if standardized queries can be used &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useStandardizedQueries</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useStandardizedQueries</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets the security handler &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@securityHandler.setter</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the security handler &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">abstract</span><span class="o">.</span><span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">AGOLTokenSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">token</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">username</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">_password</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">token_url</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">OAuthSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">token</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.addAttachment"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.addAttachment">[docs]</a>    <span class="k">def</span> <span class="nf">addAttachment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oid</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds an attachment to a feature service</span>
<span class="sd">            Input:</span>
<span class="sd">              oid - string - OBJECTID value to add attachment to</span>
<span class="sd">              file_path - string - path to file</span>
<span class="sd">            Output:</span>
<span class="sd">              JSON Repsonse</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttachments</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">attachURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/addAttachment&quot;</span> <span class="o">%</span> <span class="n">oid</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;f&#39;</span><span class="p">:</span><span class="s1">&#39;json&#39;</span><span class="p">}</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">attachURL</span><span class="p">)</span>

            <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attachment&#39;</span><span class="p">:</span> <span class="n">file_path</span><span class="p">}</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">attachURL</span><span class="p">,</span>
                             <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                             <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">&quot;Attachments are not supported for this feature service.&quot;</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.deleteAttachment"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.deleteAttachment">[docs]</a>    <span class="k">def</span> <span class="nf">deleteAttachment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oid</span><span class="p">,</span> <span class="n">attachment_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes an attachment from a feature service feature</span>
<span class="sd">            Input:</span>
<span class="sd">              oid - integer or string - id of feature</span>
<span class="sd">              attachment_id - integer - id of attachment to erase</span>
<span class="sd">            Output:</span>
<span class="sd">               JSON response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/deleteAttachments&quot;</span> <span class="o">%</span> <span class="n">oid</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span><span class="p">:</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attachmentIds&quot;</span> <span class="p">:</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">attachment_id</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.updateAttachment"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.updateAttachment">[docs]</a>    <span class="k">def</span> <span class="nf">updateAttachment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oid</span><span class="p">,</span> <span class="n">attachment_id</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; updates an existing attachment with a new file</span>
<span class="sd">            Inputs:</span>
<span class="sd">               oid - string/integer - Unique record ID</span>
<span class="sd">               attachment_id - integer - Unique attachment identifier</span>
<span class="sd">               file_path - string - path to new attachment</span>
<span class="sd">            Output:</span>
<span class="sd">               JSON response</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/updateAttachment&quot;</span> <span class="o">%</span> <span class="n">oid</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span><span class="p">:</span><span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;attachmentId&quot;</span> <span class="p">:</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">attachment_id</span>
        <span class="p">}</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;attachment&#39;</span><span class="p">:</span> <span class="n">file_path</span> <span class="p">}</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                             <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                             <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">res</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.listAttachments"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.listAttachments">[docs]</a>    <span class="k">def</span> <span class="nf">listAttachments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; list attachements for a given OBJECT ID &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/attachments&quot;</span> <span class="o">%</span> <span class="n">oid</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span><span class="p">:</span><span class="s2">&quot;json&quot;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                            <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.create_fc_template"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.create_fc_template">[docs]</a>    <span class="k">def</span> <span class="nf">create_fc_template</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_path</span><span class="p">,</span> <span class="n">out_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a featureclass template on local disk&quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">objectIdField</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objectIdField</span>
        <span class="n">geomType</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryType</span>
        <span class="n">wkid</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentLayer</span><span class="o">.</span><span class="n">spatialReference</span><span class="p">[</span><span class="s1">&#39;wkid&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">create_feature_class</span><span class="p">(</span><span class="n">out_path</span><span class="p">,</span>
                                    <span class="n">out_name</span><span class="p">,</span>
                                    <span class="n">geomType</span><span class="p">,</span>
                                    <span class="n">wkid</span><span class="p">,</span>
                                    <span class="n">fields</span><span class="p">,</span>
                                    <span class="n">objectIdField</span><span class="p">)</span></div>
<div class="viewcode-block" id="FeatureLayer.create_feature_template"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.create_feature_template">[docs]</a>    <span class="k">def</span> <span class="nf">create_feature_template</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;creates a feature template&quot;&quot;&quot;</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fields</span>
        <span class="n">feat_schema</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">att</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">fld</span> <span class="ow">in</span> <span class="n">fields</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">fld</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectIdField</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">fld</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span><span class="p">:</span>
                <span class="n">att</span><span class="p">[</span><span class="n">fld</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">feat_schema</span><span class="p">[</span><span class="s1">&#39;attributes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">att</span>
        <span class="n">feat_schema</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">return</span> <span class="n">Feature</span><span class="p">(</span><span class="n">feat_schema</span><span class="p">)</span></div>

    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.query"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.query">[docs]</a>    <span class="k">def</span> <span class="nf">query</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
              <span class="n">where</span><span class="o">=</span><span class="s2">&quot;1=1&quot;</span><span class="p">,</span>
              <span class="n">out_fields</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
              <span class="n">timeFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">geometryFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">returnGeometry</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">returnIDsOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnCountOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnFeatureClass</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnDistinctValues</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">returnExtentOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">groupByFieldsForStatistics</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">statisticFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">resultOffset</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="n">resultRecordCount</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="n">out_fc</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
              <span class="n">objectIds</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
              <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; queries a feature service based on a sql statement</span>
<span class="sd">            Inputs:</span>
<span class="sd">               where - the selection sql statement</span>
<span class="sd">               out_fields - the attribute fields to return</span>
<span class="sd">               timeFilter - a TimeFilter object where either the start time</span>
<span class="sd">                            or start and end time are defined to limit the</span>
<span class="sd">                            search results for a given time.  The values in</span>
<span class="sd">                            the timeFilter should be as UTC timestampes in</span>
<span class="sd">                            milliseconds.  No checking occurs to see if they</span>
<span class="sd">                            are in the right format.</span>
<span class="sd">               geometryFilter - a GeometryFilter object to parse down a given</span>
<span class="sd">                               query by another spatial dataset.</span>
<span class="sd">               returnGeometry - true means a geometry will be returned,</span>
<span class="sd">                                else just the attributes</span>
<span class="sd">               returnIDsOnly - false is default.  True means only OBJECTIDs</span>
<span class="sd">                               will be returned</span>
<span class="sd">               returnCountOnly - if True, then an integer is returned only</span>
<span class="sd">                                 based on the sql statement</span>
<span class="sd">               returnFeatureClass - Default False. If true, query will be</span>
<span class="sd">                                    returned as feature class</span>
<span class="sd">               groupByFieldsForStatistics - One or more field names on</span>
<span class="sd">                                    which the values need to be grouped for</span>
<span class="sd">                                    calculating the statistics.</span>
<span class="sd">               resultOffset - Default is 0. If set, this option can be used</span>
<span class="sd">               for fetching query results by skipping the specified number of records and starting from the next record</span>
<span class="sd">               (that is, resultOffset + 1th).</span>

<span class="sd">               resultRecordCount - This option can be used for fetching query results up</span>
<span class="sd">               to the resultRecordCount specified. When resultOffset is specified but this</span>
<span class="sd">               parameter is not, the map service defaults it to maxRecordCount. The maximum</span>
<span class="sd">               value for this parameter is the value of the layer&#39;s maxRecordCount property.</span>

<span class="sd">               statisticFilter - object that performs statistic queries</span>
<span class="sd">               out_fc - only valid if returnFeatureClass is set to True.</span>
<span class="sd">                        Output location of query.</span>
<span class="sd">               kwargs - optional parameters that can be passed to the Query</span>
<span class="sd">                 function.  This will allow users to pass additional</span>
<span class="sd">                 parameters not explicitly implemented on the function. A</span>
<span class="sd">                 complete list of functions available is documented on the</span>
<span class="sd">                 Query REST API.</span>
<span class="sd">            Output:</span>
<span class="sd">               A list of Feature Objects (default) or a path to the output featureclass if</span>
<span class="sd">               returnFeatureClass is set to True.</span>
<span class="sd">         &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;where&quot;</span><span class="p">:</span> <span class="n">where</span><span class="p">,</span>
                  <span class="s2">&quot;outFields&quot;</span><span class="p">:</span> <span class="n">out_fields</span><span class="p">,</span>
                  <span class="s2">&quot;returnGeometry&quot;</span> <span class="p">:</span> <span class="n">returnGeometry</span><span class="p">,</span>
                  <span class="s2">&quot;returnIdsOnly&quot;</span> <span class="p">:</span> <span class="n">returnIDsOnly</span><span class="p">,</span>
                  <span class="s2">&quot;returnCountOnly&quot;</span> <span class="p">:</span> <span class="n">returnCountOnly</span><span class="p">,</span>
                  <span class="s2">&quot;returnDistinctValues&quot;</span> <span class="p">:</span> <span class="n">returnDistinctValues</span><span class="p">,</span>
                  <span class="s2">&quot;returnExtentOnly&quot;</span> <span class="p">:</span> <span class="n">returnExtentOnly</span>
                  <span class="p">}</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">params</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">timeFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">timeFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">TimeFilter</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">timeFilter</span><span class="o">.</span><span class="n">filter</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">geometryFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometryFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">GeometryFilter</span><span class="p">):</span>
            <span class="n">gf</span> <span class="o">=</span> <span class="n">geometryFilter</span><span class="o">.</span><span class="n">filter</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;spatialRelationship&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;spatialRel&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gf</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">objectIds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">objectIds</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;objectIds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">objectIds</span>
        <span class="k">if</span> <span class="n">resultOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">resultOffset</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;resultOffset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resultOffset</span>
        <span class="k">if</span> <span class="n">resultRecordCount</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> <span class="n">resultRecordCount</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;resultRecordCount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">resultRecordCount</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">groupByFieldsForStatistics</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;groupByFieldsForStatistics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">groupByFieldsForStatistics</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">statisticFilter</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">statisticFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">StatisticFilter</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;outStatistics&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">statisticFilter</span><span class="o">.</span><span class="n">filter</span>
        <span class="n">fURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/query&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">fURL</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                               <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                               <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                               <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span> <span class="p">(</span><span class="n">results</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">returnCountOnly</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">returnIDsOnly</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">returnFeatureClass</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="n">json_text</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
                <span class="n">temp</span> <span class="o">=</span> <span class="n">scratchFolder</span><span class="p">()</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">get_hex</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.json&quot;</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temp</span><span class="p">,</span> <span class="s1">&#39;wb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json_text</span><span class="p">)</span>
                    <span class="n">writer</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
                <span class="k">del</span> <span class="n">writer</span>
                <span class="n">fc</span> <span class="o">=</span> <span class="n">json_to_featureclass</span><span class="p">(</span><span class="n">json_file</span><span class="o">=</span><span class="n">temp</span><span class="p">,</span>
                                          <span class="n">out_fc</span><span class="o">=</span><span class="n">out_fc</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">fc</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">FeatureSet</span><span class="o">.</span><span class="n">fromJSON</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">results</span>
        <span class="k">return</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.query_related_records"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.query_related_records">[docs]</a>    <span class="k">def</span> <span class="nf">query_related_records</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                              <span class="n">objectIds</span><span class="p">,</span>
                              <span class="n">relationshipId</span><span class="p">,</span>
                              <span class="n">outFields</span><span class="o">=</span><span class="s2">&quot;*&quot;</span><span class="p">,</span>
                              <span class="n">definitionExpression</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">returnGeometry</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">maxAllowableOffset</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">geometryPrecision</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">outWKID</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                              <span class="n">returnZ</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                              <span class="n">returnM</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The Query operation is performed on a feature service layer</span>
<span class="sd">           resource. The result of this operation are feature sets grouped</span>
<span class="sd">           by source layer/table object IDs. Each feature set contains</span>
<span class="sd">           Feature objects including the values for the fields requested by</span>
<span class="sd">           the user. For related layers, if you request geometry</span>
<span class="sd">           information, the geometry of each feature is also returned in</span>
<span class="sd">           the feature set. For related tables, the feature set does not</span>
<span class="sd">           include geometries.</span>
<span class="sd">           Inputs:</span>
<span class="sd">              objectIds - the object IDs of the table/layer to be queried</span>
<span class="sd">              relationshipId - The ID of the relationship to be queried.</span>
<span class="sd">              outFields - the list of fields from the related table/layer</span>
<span class="sd">                          to be included in the returned feature set. This</span>
<span class="sd">                          list is a comma delimited list of field names. If</span>
<span class="sd">                          you specify the shape field in the list of return</span>
<span class="sd">                          fields, it is ignored. To request geometry, set</span>
<span class="sd">                          returnGeometry to true.</span>
<span class="sd">                          You can also specify the wildcard &quot;*&quot; as the</span>
<span class="sd">                          value of this parameter. In this case, the result</span>
<span class="sd">                          s will include all the field values.</span>
<span class="sd">              definitionExpression - The definition expression to be</span>
<span class="sd">                                     applied to the related table/layer.</span>
<span class="sd">                                     From the list of objectIds, only those</span>
<span class="sd">                                     records that conform to this</span>
<span class="sd">                                     expression are queried for related</span>
<span class="sd">                                     records.</span>
<span class="sd">              returnGeometry - If true, the feature set includes the</span>
<span class="sd">                               geometry associated with each feature. The</span>
<span class="sd">                               default is true.</span>
<span class="sd">              maxAllowableOffset - This option can be used to specify the</span>
<span class="sd">                                   maxAllowableOffset to be used for</span>
<span class="sd">                                   generalizing geometries returned by the</span>
<span class="sd">                                   query operation. The maxAllowableOffset</span>
<span class="sd">                                   is in the units of the outSR. If outSR</span>
<span class="sd">                                   is not specified, then</span>
<span class="sd">                                   maxAllowableOffset is assumed to be in</span>
<span class="sd">                                   the unit of the spatial reference of the</span>
<span class="sd">                                   map.</span>
<span class="sd">              geometryPrecision - This option can be used to specify the</span>
<span class="sd">                                  number of decimal places in the response</span>
<span class="sd">                                  geometries.</span>
<span class="sd">              outWKID - The spatial reference of the returned geometry.</span>
<span class="sd">              gdbVersion - The geodatabase version to query. This parameter</span>
<span class="sd">                           applies only if the isDataVersioned property of</span>
<span class="sd">                           the layer queried is true.</span>
<span class="sd">              returnZ - If true, Z values are included in the results if</span>
<span class="sd">                        the features have Z values. Otherwise, Z values are</span>
<span class="sd">                        not returned. The default is false.</span>
<span class="sd">              returnM - If true, M values are included in the results if</span>
<span class="sd">                        the features have M values. Otherwise, M values are</span>
<span class="sd">                        not returned. The default is false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;objectIds&quot;</span> <span class="p">:</span> <span class="n">objectIds</span><span class="p">,</span>
            <span class="s2">&quot;relationshipId&quot;</span> <span class="p">:</span> <span class="n">relationshipId</span><span class="p">,</span>
            <span class="s2">&quot;outFields&quot;</span> <span class="p">:</span> <span class="n">outFields</span><span class="p">,</span>
            <span class="s2">&quot;returnGeometry&quot;</span> <span class="p">:</span> <span class="n">returnGeometry</span><span class="p">,</span>
            <span class="s2">&quot;returnM&quot;</span> <span class="p">:</span> <span class="n">returnM</span><span class="p">,</span>
            <span class="s2">&quot;returnZ&quot;</span> <span class="p">:</span> <span class="n">returnZ</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">gdbVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;gdbVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdbVersion</span>
        <span class="k">if</span> <span class="n">definitionExpression</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;definitionExpression&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">definitionExpression</span>
        <span class="k">if</span> <span class="n">outWKID</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;outSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">SpatialReference</span><span class="p">(</span><span class="n">outWKID</span><span class="p">)</span><span class="o">.</span><span class="n">asDictionary</span>
        <span class="k">if</span> <span class="n">maxAllowableOffset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;maxAllowableOffset&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">maxAllowableOffset</span>
        <span class="k">if</span> <span class="n">geometryPrecision</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometryPrecision&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">geometryPrecision</span>
        <span class="n">quURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/queryRelatedRecords&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">quURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                           <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                           <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                           <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.getHTMLPopup"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.getHTMLPopup">[docs]</a>    <span class="k">def</span> <span class="nf">getHTMLPopup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">oid</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The htmlPopup resource provides details about the HTML pop-up</span>
<span class="sd">           authored by the user using ArcGIS for Desktop.</span>
<span class="sd">           Input:</span>
<span class="sd">              oid - object id of the feature where the HTML pop-up</span>
<span class="sd">           Output:</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">htmlPopupType</span> <span class="o">!=</span> <span class="s2">&quot;esriServerHTMLPopupTypeNone&quot;</span><span class="p">:</span>
            <span class="n">popURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/</span><span class="si">%s</span><span class="s2">/htmlPopup&quot;</span> <span class="o">%</span> <span class="n">oid</span>
            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;f&#39;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span>
            <span class="p">}</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">popURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="s2">&quot;&quot;</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">_chunks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Yield n successive chunks from a list l.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">l</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">newn</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="n">n</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="o">*</span><span class="n">newn</span><span class="p">:</span><span class="n">i</span><span class="o">*</span><span class="n">newn</span><span class="o">+</span><span class="n">newn</span><span class="p">]</span>
        <span class="k">yield</span> <span class="n">l</span><span class="p">[</span><span class="n">n</span><span class="o">*</span><span class="n">newn</span><span class="o">-</span><span class="n">newn</span><span class="p">:]</span>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.get_local_copy"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.get_local_copy">[docs]</a>    <span class="k">def</span> <span class="nf">get_local_copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">out_path</span><span class="p">,</span> <span class="n">includeAttachments</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; exports the whole feature service to a feature class</span>
<span class="sd">            Input:</span>
<span class="sd">               out_path - path to where the data will be placed</span>
<span class="sd">               includeAttachments - default False. If sync is not supported</span>
<span class="sd">                                    then the paramter is ignored.</span>
<span class="sd">            Output:</span>
<span class="sd">               path to exported feature class or fgdb (as list)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttachments</span> <span class="ow">and</span> \
           <span class="bp">self</span><span class="o">.</span><span class="n">parentLayer</span><span class="o">.</span><span class="n">syncEnabled</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentLayer</span><span class="o">.</span><span class="n">createReplica</span><span class="p">(</span><span class="n">replicaName</span><span class="o">=</span><span class="s2">&quot;fgdb_dump&quot;</span><span class="p">,</span>
                                                  <span class="n">layers</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                                  <span class="n">attachmentsSyncDirection</span><span class="o">=</span><span class="s2">&quot;upload&quot;</span><span class="p">,</span>
                                                  <span class="n">async</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                                  <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                                  <span class="n">returnAttachments</span><span class="o">=</span><span class="n">includeAttachments</span><span class="p">,</span>
                                                  <span class="n">out_path</span><span class="o">=</span><span class="n">out_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasAttachments</span> <span class="o">==</span> <span class="bp">False</span> <span class="ow">and</span> \
             <span class="bp">self</span><span class="o">.</span><span class="n">parentLayer</span><span class="o">.</span><span class="n">syncEnabled</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentLayer</span><span class="o">.</span><span class="n">createReplica</span><span class="p">(</span><span class="n">replicaName</span><span class="o">=</span><span class="s2">&quot;fgdb_dump&quot;</span><span class="p">,</span>
                                                  <span class="n">layers</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                                                  <span class="n">attachmentsSyncDirection</span><span class="o">=</span><span class="s2">&quot;upload&quot;</span><span class="p">,</span>
                                                  <span class="n">async</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                                  <span class="n">wait</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                                  <span class="n">returnAttachments</span><span class="o">=</span><span class="n">includeAttachments</span><span class="p">,</span>
                                                  <span class="n">out_path</span><span class="o">=</span><span class="n">out_path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result_features</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">returnIDsOnly</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">OIDS</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;objectIds&#39;</span><span class="p">]</span>
            <span class="n">OIDS</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="n">OIDField</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;objectIdFieldName&#39;</span><span class="p">]</span>
            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">OIDS</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxRecordCount</span><span class="p">:</span>
                <span class="n">bins</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bins</span> <span class="o">=</span> <span class="n">count</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxRecordCount</span>
                <span class="n">v</span> <span class="o">=</span> <span class="n">count</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">maxRecordCount</span>
                <span class="k">if</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bins</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunks</span><span class="p">(</span><span class="n">OIDS</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
                <span class="n">chunk</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
                <span class="n">sql</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> &gt;= </span><span class="si">%s</span><span class="s2"> and </span><span class="si">%s</span><span class="s2"> &lt;= </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">OIDField</span><span class="p">,</span> <span class="n">chunk</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                                 <span class="n">OIDField</span><span class="p">,</span> <span class="n">chunk</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">temp_base</span> <span class="o">=</span> <span class="s2">&quot;a&quot;</span> <span class="o">+</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">get_hex</span><span class="p">()[:</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;a&quot;</span>
                <span class="n">temp_fc</span> <span class="o">=</span> <span class="s2">r&quot;</span><span class="si">%s</span><span class="s2">\</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">scratchGDB</span><span class="p">(),</span> <span class="n">temp_base</span><span class="p">)</span>
                <span class="n">temp_fc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">where</span><span class="o">=</span><span class="n">sql</span><span class="p">,</span>
                                     <span class="n">returnFeatureClass</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                     <span class="n">out_fc</span><span class="o">=</span><span class="n">temp_fc</span><span class="p">)</span>
                <span class="n">result_features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_fc</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">merge_feature_class</span><span class="p">(</span><span class="n">merges</span><span class="o">=</span><span class="n">result_features</span><span class="p">,</span>
                                       <span class="n">out_fc</span><span class="o">=</span><span class="n">out_path</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.updateFeature"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.updateFeature">[docs]</a>    <span class="k">def</span> <span class="nf">updateFeature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                      <span class="n">features</span><span class="p">,</span>
                      <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                      <span class="n">rollbackOnFailure</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           updates an existing feature in a feature service layer</span>
<span class="sd">           Input:</span>
<span class="sd">              feature - feature object(s) to get updated.  A single</span>
<span class="sd">                        feature, a list of feature objects can be passed,</span>
<span class="sd">                        or a FeatureSet object.</span>
<span class="sd">           Output:</span>
<span class="sd">              dictionary of result messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;rollbackOnFailure&quot;</span> <span class="p">:</span> <span class="n">rollbackOnFailure</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">gdbVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;gdbVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdbVersion</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">Feature</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">features</span><span class="o">.</span><span class="n">asDictionary</span><span class="p">],</span>
                                            <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span>
                                            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">vals</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="n">Feature</span><span class="p">):</span>
                    <span class="n">vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">asDictionary</span><span class="p">)</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">vals</span><span class="p">,</span>
                                            <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span>
                                            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">FeatureSet</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span>
                <span class="p">[</span><span class="n">feature</span><span class="o">.</span><span class="n">asDictionary</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="o">.</span><span class="n">features</span><span class="p">],</span>
                <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;message&#39;</span> <span class="p">:</span> <span class="s2">&quot;invalid inputs&quot;</span><span class="p">}</span>
        <span class="n">updateURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/updateFeatures&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">updateURL</span><span class="p">,</span>
                            <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                            <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">res</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.deleteFeatures"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.deleteFeatures">[docs]</a>    <span class="k">def</span> <span class="nf">deleteFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                       <span class="n">objectIds</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">where</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
                       <span class="n">geometryFilter</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                       <span class="n">rollbackOnFailure</span><span class="o">=</span><span class="bp">True</span>
                       <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; removes 1:n features based on a sql statement</span>
<span class="sd">            Input:</span>
<span class="sd">              objectIds - The object IDs of this layer/table to be deleted</span>
<span class="sd">              where - A where clause for the query filter. Any legal SQL</span>
<span class="sd">                      where clause operating on the fields in the layer is</span>
<span class="sd">                      allowed. Features conforming to the specified where</span>
<span class="sd">                      clause will be deleted.</span>
<span class="sd">              geometryFilter - a filters.GeometryFilter object to limit</span>
<span class="sd">                               deletion by a geometry.</span>
<span class="sd">              gdbVersion - Geodatabase version to apply the edits. This</span>
<span class="sd">                           parameter applies only if the isDataVersioned</span>
<span class="sd">                           property of the layer is true</span>
<span class="sd">              rollbackOnFailure - parameter to specify if the edits should</span>
<span class="sd">                                  be applied only if all submitted edits</span>
<span class="sd">                                  succeed. If false, the server will apply</span>
<span class="sd">                                  the edits that succeed even if some of</span>
<span class="sd">                                  the submitted edits fail. If true, the</span>
<span class="sd">                                  server will apply the edits only if all</span>
<span class="sd">                                  edits succeed. The default value is true.</span>
<span class="sd">            Output:</span>
<span class="sd">               JSON response as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/deleteFeatures&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">geometryFilter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">geometryFilter</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">GeometryFilter</span><span class="p">):</span>
            <span class="n">gfilter</span> <span class="o">=</span> <span class="n">geometryFilter</span><span class="o">.</span><span class="n">filter</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gfilter</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gfilter</span><span class="p">[</span><span class="s1">&#39;geometryType&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gfilter</span><span class="p">[</span><span class="s1">&#39;inSR&#39;</span><span class="p">]</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;spatialRel&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gfilter</span><span class="p">[</span><span class="s1">&#39;spatialRel&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">where</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="n">where</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;where&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">where</span>
        <span class="k">if</span> <span class="n">objectIds</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="n">objectIds</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;objectIds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">objectIds</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">dURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                               <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                               <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                               <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">result</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.applyEdits"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.applyEdits">[docs]</a>    <span class="k">def</span> <span class="nf">applyEdits</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                   <span class="n">addFeatures</span><span class="o">=</span><span class="p">[],</span>
                   <span class="n">updateFeatures</span><span class="o">=</span><span class="p">[],</span>
                   <span class="n">deleteFeatures</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">useGlobalIds</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                   <span class="n">rollbackOnFailure</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           This operation adds, updates, and deletes features to the</span>
<span class="sd">           associated feature layer or table in a single call.</span>
<span class="sd">           Inputs:</span>
<span class="sd">              addFeatures - The array of features to be added.  These</span>
<span class="sd">                            features should be common.Feature objects</span>
<span class="sd">              updateFeatures - The array of features to be updateded.</span>
<span class="sd">                               These features should be common.Feature</span>
<span class="sd">                               objects</span>
<span class="sd">              deleteFeatures - string of OIDs to remove from service</span>
<span class="sd">              gdbVersion - Geodatabase version to apply the edits.</span>
<span class="sd">              useGlobalIds - instead of referencing the default Object ID</span>
<span class="sd">                              field, the service will look at a GUID field</span>
<span class="sd">                              to track changes.  This means the GUIDs will</span>
<span class="sd">                              be passed instead of OIDs for delete,</span>
<span class="sd">                              update or add features.</span>
<span class="sd">              rollbackOnFailure - Optional parameter to specify if the</span>
<span class="sd">                                  edits should be applied only if all</span>
<span class="sd">                                  submitted edits succeed. If false, the</span>
<span class="sd">                                  server will apply the edits that succeed</span>
<span class="sd">                                  even if some of the submitted edits fail.</span>
<span class="sd">                                  If true, the server will apply the edits</span>
<span class="sd">                                  only if all edits succeed. The default</span>
<span class="sd">                                  value is true.</span>
<span class="sd">           Output:</span>
<span class="sd">              dictionary of messages</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">editURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/applyEdits&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;useGlobalIds&quot;</span> <span class="p">:</span> <span class="n">userGlobalIds</span><span class="p">,</span>
                  <span class="s2">&quot;rollbackOnFailure&quot;</span> <span class="p">:</span> <span class="n">rollbackOnFailure</span>
                  <span class="p">}</span>
        <span class="k">if</span> <span class="n">gdbVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;gdbVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdbVersion</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">addFeatures</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">addFeatures</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Feature</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;adds&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">asDictionary</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">addFeatures</span><span class="p">],</span>
                                        <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">updateFeatures</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">updateFeatures</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">Feature</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;updates&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">f</span><span class="o">.</span><span class="n">asDictionary</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">updateFeatures</span><span class="p">],</span>
                                           <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">deleteFeatures</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="nb">isinstance</span><span class="p">(</span><span class="n">deleteFeatures</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;deletes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">deleteFeatures</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">editURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.addFeature"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.addFeature">[docs]</a>    <span class="k">def</span> <span class="nf">addFeature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">features</span><span class="p">,</span>
                   <span class="n">gdbVersion</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                   <span class="n">rollbackOnFailure</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Adds a single feature to the service</span>
<span class="sd">           Inputs:</span>
<span class="sd">              feature - list of common.Feature object or a single</span>
<span class="sd">                        common.Feature Object or a FeatureSet object</span>
<span class="sd">              gdbVersion - Geodatabase version to apply the edits</span>
<span class="sd">              rollbackOnFailure - Optional parameter to specify if the</span>
<span class="sd">                                  edits should be applied only if all</span>
<span class="sd">                                  submitted edits succeed. If false, the</span>
<span class="sd">                                  server will apply the edits that succeed</span>
<span class="sd">                                  even if some of the submitted edits fail.</span>
<span class="sd">                                  If true, the server will apply the edits</span>
<span class="sd">                                  only if all edits succeed. The default</span>
<span class="sd">                                  value is true.</span>
<span class="sd">           Output:</span>
<span class="sd">              JSON message as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/addFeatures&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">gdbVersion</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;gdbVersion&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gdbVersion</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">rollbackOnFailure</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;rollbackOnFailure&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rollbackOnFailure</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">feature</span><span class="o">.</span><span class="n">asDictionary</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="p">],</span>
                                            <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">Feature</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">features</span><span class="o">.</span><span class="n">asDictionary</span><span class="p">],</span>
                                            <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="n">FeatureSet</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">feature</span><span class="o">.</span><span class="n">asDictionary</span> <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">features</span><span class="o">.</span><span class="n">features</span><span class="p">],</span>
                                            <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                             <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div>
    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.addFeatures"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.addFeatures">[docs]</a>    <span class="k">def</span> <span class="nf">addFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fc</span><span class="p">,</span> <span class="n">attachmentTable</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">nameField</span><span class="o">=</span><span class="s2">&quot;ATT_NAME&quot;</span><span class="p">,</span> <span class="n">blobField</span><span class="o">=</span><span class="s2">&quot;DATA&quot;</span><span class="p">,</span>
                    <span class="n">contentTypeField</span><span class="o">=</span><span class="s2">&quot;CONTENT_TYPE&quot;</span><span class="p">,</span>
                    <span class="n">rel_object_field</span><span class="o">=</span><span class="s2">&quot;REL_OBJECTID&quot;</span><span class="p">,</span>
                    <span class="n">lowerCaseFieldNames</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds a feature to the feature service</span>
<span class="sd">           Inputs:</span>
<span class="sd">              fc - string - path to feature class data to add.</span>
<span class="sd">              attachmentTable - string - (optional) path to attachment table</span>
<span class="sd">              nameField - string - (optional) name of file field in attachment table</span>
<span class="sd">              blobField - string - (optional) name field containing blob data</span>
<span class="sd">              contentTypeField - string - (optional) name of field containing content type</span>
<span class="sd">              rel_object_field - string - (optional) name of field with OID of feature class</span>
<span class="sd">           Output:</span>
<span class="sd">              boolean, add results message as list of dictionaries</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">messages</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;addResults&#39;</span><span class="p">:[]}</span>

        <span class="k">if</span> <span class="n">attachmentTable</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">bins</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/addFeatures&quot;</span>
            <span class="n">max_chunk</span> <span class="o">=</span> <span class="mi">250</span>
            <span class="n">js</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span>
                 <span class="n">featureclass_to_json</span><span class="p">(</span><span class="n">fc</span><span class="p">)))</span>
            <span class="n">js</span> <span class="o">=</span> <span class="n">js</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">lowerCaseFieldNames</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">feat</span> <span class="ow">in</span> <span class="n">js</span><span class="p">:</span>
                    <span class="n">feat</span><span class="p">[</span><span class="s1">&#39;attributes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">k</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span> <span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">feat</span><span class="p">[</span><span class="s1">&#39;attributes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">js</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;addResults&#39;</span><span class="p">:</span><span class="bp">None</span><span class="p">}</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">js</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">max_chunk</span><span class="p">:</span>
                <span class="n">bins</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">bins</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">js</span><span class="p">)</span><span class="o">/</span><span class="n">max_chunk</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">js</span><span class="p">)</span> <span class="o">%</span> <span class="n">max_chunk</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">bins</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">chunks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chunks</span><span class="p">(</span><span class="n">l</span><span class="o">=</span><span class="n">js</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">bins</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
                <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s1">&#39;json&#39;</span><span class="p">,</span>
                    <span class="s2">&quot;features&quot;</span>  <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">chunk</span><span class="p">,</span>
                                             <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
                <span class="p">}</span>

                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                       <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                       <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">messages</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                    <span class="n">messages</span> <span class="o">=</span> <span class="n">result</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;addResults&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s1">&#39;addResults&#39;</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span>
                            <span class="n">messages</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">messages</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">messages</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>

                <span class="k">del</span> <span class="n">params</span>
                <span class="k">del</span> <span class="n">result</span>
            <span class="k">return</span> <span class="n">messages</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">oid_field</span> <span class="o">=</span> <span class="n">get_OID_field</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
            <span class="n">OIDs</span> <span class="o">=</span> <span class="n">get_records_with_attachments</span><span class="p">(</span><span class="n">attachment_table</span><span class="o">=</span><span class="n">attachmentTable</span><span class="p">)</span>
            <span class="n">fl</span> <span class="o">=</span> <span class="n">create_feature_layer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> not in ( </span><span class="si">%s</span><span class="s2"> )&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">oid_field</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">OIDs</span><span class="p">)))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFeatures</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">messages</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">fl</span>
            <span class="k">for</span> <span class="n">oid</span> <span class="ow">in</span> <span class="n">OIDs</span><span class="p">:</span>
                <span class="n">fl</span> <span class="o">=</span> <span class="n">create_feature_layer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">oid_field</span><span class="p">,</span> <span class="n">oid</span><span class="p">),</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;layer</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">oid</span><span class="p">)</span>
                <span class="n">msgs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFeatures</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">msgs</span><span class="p">[</span><span class="s1">&#39;addResults&#39;</span><span class="p">]:</span>
                    <span class="n">oid_fs</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;objectId&#39;</span><span class="p">]</span>
                    <span class="n">sends</span> <span class="o">=</span> <span class="n">get_attachment_data</span><span class="p">(</span><span class="n">attachmentTable</span><span class="p">,</span> <span class="n">sql</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> = </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">rel_object_field</span><span class="p">,</span> <span class="n">oid</span><span class="p">))</span>
                    <span class="n">result</span><span class="p">[</span><span class="s1">&#39;addAttachmentResults&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sends</span><span class="p">:</span>
                        <span class="n">attRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addAttachment</span><span class="p">(</span><span class="n">oid_fs</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;blob&#39;</span><span class="p">])</span>

                        <span class="k">if</span> <span class="s1">&#39;addAttachmentResult&#39;</span> <span class="ow">in</span> <span class="n">attRes</span><span class="p">:</span>
                            <span class="n">attRes</span><span class="p">[</span><span class="s1">&#39;addAttachmentResult&#39;</span><span class="p">][</span><span class="s1">&#39;AttachmentName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;addAttachmentResults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attRes</span><span class="p">[</span><span class="s1">&#39;addAttachmentResult&#39;</span><span class="p">])</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">attRes</span><span class="p">[</span><span class="s1">&#39;AttachmentName&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
                            <span class="n">result</span><span class="p">[</span><span class="s1">&#39;addAttachmentResults&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attRes</span><span class="p">)</span>
                        <span class="k">del</span> <span class="n">s</span>
                    <span class="k">del</span> <span class="n">sends</span>
                    <span class="k">del</span> <span class="n">result</span>
                <span class="n">messages</span><span class="o">.</span><span class="n">update</span><span class="p">(</span> <span class="n">msgs</span><span class="p">)</span>
                <span class="k">del</span> <span class="n">fl</span>
                <span class="k">del</span> <span class="n">oid</span>
            <span class="k">del</span> <span class="n">OIDs</span>
            <span class="k">return</span> <span class="n">messages</span></div>

    <span class="c1">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="FeatureLayer.calculate"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.FeatureLayer.calculate">[docs]</a>    <span class="k">def</span> <span class="nf">calculate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">where</span><span class="p">,</span> <span class="n">calcExpression</span><span class="p">,</span> <span class="n">sqlFormat</span><span class="o">=</span><span class="s2">&quot;standard&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The calculate operation is performed on a feature service layer</span>
<span class="sd">        resource. It updates the values of one or more fields in an</span>
<span class="sd">        existing feature service layer based on SQL expressions or scalar</span>
<span class="sd">        values. The calculate operation can only be used if the</span>
<span class="sd">        supportsCalculate property of the layer is true.</span>
<span class="sd">        Neither the Shape field nor system fields can be updated using</span>
<span class="sd">        calculate. System fields include ObjectId and GlobalId.</span>
<span class="sd">        See Calculate a field for more information on supported expressions</span>

<span class="sd">        Inputs:</span>
<span class="sd">           where - A where clause can be used to limit the updated records.</span>
<span class="sd">                   Any legal SQL where clause operating on the fields in</span>
<span class="sd">                   the layer is allowed.</span>
<span class="sd">           calcExpression - The array of field/value info objects that</span>
<span class="sd">                            contain the field or fields to update and their</span>
<span class="sd">                            scalar values or SQL expression.  Allowed types</span>
<span class="sd">                            are dictionary and list.  List must be a list</span>
<span class="sd">                            of dictionary objects.</span>
<span class="sd">                            Calculation Format is as follows:</span>
<span class="sd">                               {&quot;field&quot; : &quot;&lt;field name&gt;&quot;,</span>
<span class="sd">                               &quot;value&quot; : &quot;&lt;value&gt;&quot;}</span>
<span class="sd">           sqlFormat - The SQL format for the calcExpression. It can be</span>
<span class="sd">                       either standard SQL92 (standard) or native SQL</span>
<span class="sd">                       (native). The default is standard.</span>
<span class="sd">                       Values: standard, native</span>
<span class="sd">        Output:</span>
<span class="sd">           JSON as string</span>
<span class="sd">        Usage:</span>
<span class="sd">        &gt;&gt;&gt;sh = arcrest.AGOLTokenSecurityHandler(&quot;user&quot;, &quot;pw&quot;)</span>
<span class="sd">        &gt;&gt;&gt;fl = arcrest.agol.FeatureLayer(url=&quot;someurl&quot;,</span>
<span class="sd">                                     securityHandler=sh, initialize=True)</span>
<span class="sd">        &gt;&gt;&gt;print fl.calculate(where=&quot;OBJECTID &lt; 2&quot;,</span>
<span class="sd">                              calcExpression={&quot;field&quot;: &quot;ZONE&quot;,</span>
<span class="sd">                                              &quot;value&quot; : &quot;R1&quot;})</span>
<span class="sd">        {&#39;updatedFeatureCount&#39;: 1, &#39;success&#39;: True}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s2">&quot;/calculate&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;f&quot;</span> <span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">,</span>
            <span class="s2">&quot;where&quot;</span> <span class="p">:</span> <span class="n">where</span><span class="p">,</span>

        <span class="p">}</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calcExpression</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;calcExpression&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="n">calcExpression</span><span class="p">],</span>
                                                  <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">calcExpression</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">params</span><span class="p">[</span><span class="s2">&quot;calcExpression&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">calcExpression</span><span class="p">,</span>
                                                  <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">sqlFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;native&#39;</span><span class="p">,</span> <span class="s1">&#39;standard&#39;</span><span class="p">]:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;sqlFormat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sqlFormat</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s1">&#39;sqlFormat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;standard&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                             <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                             <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span></div></div>
<span class="c1">########################################################################</span>
<div class="viewcode-block" id="TableLayer"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.TableLayer">[docs]</a><span class="k">class</span> <span class="nc">TableLayer</span><span class="p">(</span><span class="n">FeatureLayer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Table object is exactly like FeatureLayer object&quot;&quot;&quot;</span>
    <span class="k">pass</span></div>
<span class="c1">########################################################################</span>
<div class="viewcode-block" id="TiledService"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.services.TiledService">[docs]</a><span class="k">class</span> <span class="nc">TiledService</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       AGOL Tiled Map Service</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_mapName</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_documentInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_layers</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_tables</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedImageFormatTypes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_storageFormat</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_access</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_units</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_type</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serviceDescription</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_status</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_tileInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fullExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_singleFusedMapCache</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_created</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_modified</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_spatialReference</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_minScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_server</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_tileServers</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_securityHandler</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_exportTilesAllowed</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxExportTilesCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_initialExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
                 <span class="n">url</span><span class="p">,</span>
                 <span class="n">securityHandler</span><span class="p">,</span>
                 <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">securityHandler</span><span class="p">,</span> <span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">securityHandler</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">securityHandler</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_referer_url</span> <span class="o">=</span> <span class="n">securityHandler</span><span class="o">.</span><span class="n">referer_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; loads the data into the class &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;f&quot;</span><span class="p">:</span> <span class="s2">&quot;json&quot;</span><span class="p">}</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                 <span class="n">securityHandler</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> - attribute not implemented in tiled service.&quot;</span> <span class="o">%</span> <span class="n">k</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxExportTilesCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the max export tiles count&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxExportTilesCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxExportTilesCount</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">exportTilesAllowed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; export tiles allowed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exportTilesAllowed</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_exportTilesAllowed</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets the security handler &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@securityHandler.setter</span>
    <span class="k">def</span> <span class="nf">securityHandler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the security handler &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">BaseSecurityHandler</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">AGOLTokenSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">security</span><span class="o">.</span><span class="n">OAuthSecurityHandler</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_securityHandler</span> <span class="o">=</span> <span class="n">value</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns object as string &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                          <span class="n">default</span><span class="o">=</span><span class="n">_date_handler</span><span class="p">)</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; iterator generator for public values/properties</span>
<span class="sd">            It only returns the properties that are public.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">attr</span><span class="p">),</span> <span class="p">(</span><span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinFunctionType</span><span class="p">,</span>
                                                           <span class="n">types</span><span class="o">.</span><span class="n">BuiltinMethodType</span><span class="p">))</span>
                      <span class="p">]</span>
        <span class="k">for</span> <span class="n">att</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">att</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">att</span><span class="p">))</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initialExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initial extent of tile service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mapName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the map name &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapName</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mapName</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">documentInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the document information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documentInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_documentInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">copyrightText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the copyright information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the ID &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">layers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the layers &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the tables in the map service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tables</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">supportedImageFormatTypes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the supported image format types &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedImageFormatTypes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedImageFormatTypes</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">storageFormat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the storage format &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storageFormat</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storageFormat</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the capabilities &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">access</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the access value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_access</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_access</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the units &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the type &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">serviceDescription</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the status &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_status</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tileInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the tile information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileInfo</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">fullExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the full extent &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">singleFusedMapCache</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; information about the single fused map cache &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_singleFusedMapCache</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_singleFusedMapCache</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service name &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">created</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the created value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_created</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_created</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">maxScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the maximum scale &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">modified</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the modified value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modified</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modified</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">spatialReference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the spatial reference value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">minScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the minimum scale &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">server</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the server information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_server</span>
    <span class="c1">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">tileServers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the tile services value &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileServers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tileServers</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">ArcREST 3.5.4 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Esri.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
  </body>
</html>