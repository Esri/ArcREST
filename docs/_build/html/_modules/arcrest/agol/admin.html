<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>arcrest.agol.admin &mdash; src  documentation</title>
    
    <link rel="stylesheet" href="../../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <link rel="top" title="src  documentation" href="../../../index.html" />
    <link rel="up" title="Module code" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">src  documentation</a> &raquo;</li>
          <li><a href="../../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for arcrest.agol.admin</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>

<span class="sd">.. module:: admin</span>
<span class="sd">   :platform: Windows</span>
<span class="sd">   :synopsis: Base Class from which AGOL function inherit from.</span>

<span class="sd">.. moduleauthor:: test</span>


<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">httplib</span>
<span class="kn">import</span> <span class="nn">urlparse</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">xml.etree</span> <span class="kn">import</span> <span class="n">ElementTree</span> <span class="k">as</span> <span class="n">ET</span>
<span class="kn">import</span> <span class="nn">arcpy</span>
<span class="kn">import</span> <span class="nn">mimetypes</span>
<span class="kn">from</span> <span class="nn">arcpy</span> <span class="kn">import</span> <span class="n">mapping</span>
<span class="kn">from</span> <span class="nn">arcpy</span> <span class="kn">import</span> <span class="n">env</span>
<span class="kn">from</span> <span class="nn">base</span> <span class="kn">import</span> <span class="n">BaseAGOLClass</span>
<span class="c">########################################################################</span>
<div class="viewcode-block" id="Admin"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.Admin">[docs]</a><span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       The administration resource is the root node and initial entry point</span>
<span class="sd">       into a Spatial Data Server adminstrative interface. This resource</span>
<span class="sd">       represents a catalog of data sources and services published on the</span>
<span class="sd">       host.</span>
<span class="sd">       The current version and type of the server is also returned in the</span>
<span class="sd">       response. The value of the version is a number such that its value</span>
<span class="sd">       at a future release is guaranteed to be greater than its value at a</span>
<span class="sd">       previous release.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_token</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_username</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_token_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_resources</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serverType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_port</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_proxy_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
             <span class="n">username</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">password</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">token_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">token_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
                   <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
                   <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span> <span class="ow">and</span> \
                   <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">token_url</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">tokenURL</span><span class="o">=</span><span class="n">token_url</span><span class="p">,</span>
                                              <span class="n">proxy_port</span><span class="o">=</span><span class="n">proxy_port</span><span class="p">,</span>
                                            <span class="n">proxy_url</span><span class="o">=</span><span class="n">proxy_url</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>                
            <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Token was not generated&quot;</span>
            <span class="k">elif</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>      
        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initializes the service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="n">header</span><span class="o">=</span> <span class="p">{</span><span class="s">&quot;Referer&quot;</span> <span class="p">:</span> <span class="s">&quot;www.arcgis.com&quot;</span><span class="p">}</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="s">&quot; - attribute not implmented.&quot;</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Admin.currentVersion"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.Admin.currentVersion">[docs]</a>    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the software&#39;s current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Admin.resources"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.Admin.resources">[docs]</a>    <span class="k">def</span> <span class="nf">resources</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; list of all resources on the AGOL site &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resources</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_resources</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Admin.serverType"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.Admin.serverType">[docs]</a>    <span class="k">def</span> <span class="nf">serverType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the server type &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serverType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serverType</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="Admin.services"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.Admin.services">[docs]</a>    <span class="k">def</span> <span class="nf">services</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns all the service objects in the admin service&#39;s page &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_services</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/services&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                           <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                           <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&quot;services&quot;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_services</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                        <span class="n">AdminFeatureService</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span> <span class="o">+</span> <span class="s">&quot;/</span><span class="si">%s</span><span class="s">.</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">&#39;adminServiceInfo&#39;</span><span class="p">][</span><span class="s">&#39;name&#39;</span><span class="p">],</span>
                                                                        <span class="n">item</span><span class="p">[</span><span class="s">&#39;adminServiceInfo&#39;</span><span class="p">][</span><span class="s">&#39;type&#39;</span><span class="p">]),</span>
                                            <span class="n">username</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">,</span>
                                            <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">,</span>
                                            <span class="n">token_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span><span class="p">,</span>
                                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
                                            <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_services</span>
<span class="c">########################################################################</span></div></div>
<div class="viewcode-block" id="AdminMapService"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminMapService">[docs]</a><span class="k">class</span> <span class="nc">AdminMapService</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       A map service offer access to map and layer content.</span>

<span class="sd">       The REST API administrative map service resource represents a map</span>
<span class="sd">       service. This resource provides basic information about the map,</span>
<span class="sd">       including the layers that it contains, whether the map is cached or</span>
<span class="sd">       not, its spatial reference, initial and full extents, etc...  The</span>
<span class="sd">       administrative map service resource maintains a set of operations</span>
<span class="sd">       that manage the state and contents of the service.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_token</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_username</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_token_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
             <span class="n">username</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">password</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">token_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">token_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">token_url</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">tokenURL</span><span class="o">=</span><span class="n">token_url</span><span class="p">,</span>
                                              <span class="n">proxy_port</span><span class="o">=</span><span class="n">proxy_port</span><span class="p">,</span>
                                            <span class="n">proxy_url</span><span class="o">=</span><span class="n">proxy_url</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>                
            <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Token was not generated&quot;</span>
            <span class="k">elif</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initializes the service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="s">&quot; - attribute not implmented.&quot;</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminMapService.status"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminMapService.status">[docs]</a>    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service status &quot;&quot;&quot;</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/status&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminMapService.refresh"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminMapService.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; refreshes a service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/refresh&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
<span class="c">########################################################################</span></div></div>
<div class="viewcode-block" id="AdminFeatureService"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService">[docs]</a><span class="k">class</span> <span class="nc">AdminFeatureService</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       A feature service can contain datasets (e.g. tables, views) with and</span>
<span class="sd">       without a spatial column.  Datasets with a spatial column are</span>
<span class="sd">       considered layers and without a spatial column are considered</span>
<span class="sd">       tables.  A feature service allows clients to query and edit feature</span>
<span class="sd">       geometry and attributes.</span>

<span class="sd">       This resource provides basic information about the feature service</span>
<span class="sd">       including the feature layers and tables that it contains, the</span>
<span class="sd">       service description, etc.  The administrative feature service</span>
<span class="sd">       resource maintains a set of operations that manage the state and</span>
<span class="sd">       contents of the service.  Note, query and edit operations are not</span>
<span class="sd">       available via the adminstrative resource.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_token</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_username</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_token_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_url</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_xssPreventionInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_size</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_adminServiceInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_initialExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_layers</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_syncCapabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasVersionedData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_units</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedQueryFormats</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_allowGeometryUpdates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasStaticData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fullExtent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_serviceDescription</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_editorTrackingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsDisconnectedEditing</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_spatialReference</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_syncEnabled</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_dict</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
             <span class="n">username</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">password</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">token_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">token_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">token_url</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">tokenURL</span><span class="o">=</span><span class="n">token_url</span><span class="p">,</span>
                                              <span class="n">proxy_port</span><span class="o">=</span><span class="n">proxy_port</span><span class="p">,</span>
                                            <span class="n">proxy_url</span><span class="o">=</span><span class="n">proxy_url</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>                
            <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Token was not generated&quot;</span>
            <span class="k">elif</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initializes the service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span>
                                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span> <span class="o">=</span> <span class="n">json_dict</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s">&quot;layers&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">lyr</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">fl</span> <span class="o">=</span> <span class="n">AdminFeatureServiceLayer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">lyr</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span>
                                             <span class="n">username</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">,</span>
                                             <span class="n">password</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_password</span><span class="p">,</span>
                                             <span class="n">token_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span><span class="p">,</span>
                                             <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fl</span><span class="p">)</span>
                    <span class="k">del</span> <span class="n">fl</span>
                    <span class="k">del</span> <span class="n">lyr</span>
            <span class="k">elif</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="s">&quot; - attribute not implmented in AdminFeatureService.&quot;</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.status"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.status">[docs]</a>    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service status &quot;&quot;&quot;</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/status&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureService.refresh"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; refreshes a service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/refresh&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.xssPreventionInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.xssPreventionInfo">[docs]</a>    <span class="k">def</span> <span class="nf">xssPreventionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the xssPreventionInfo information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xssPreventionInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xssPreventionInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.size"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.size">[docs]</a>    <span class="k">def</span> <span class="nf">size</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the size parameter&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_size</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.maxRecordCount"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.maxRecordCount">[docs]</a>    <span class="k">def</span> <span class="nf">maxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the max record count&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.supportedQueryFormats"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.supportedQueryFormats">[docs]</a>    <span class="k">def</span> <span class="nf">supportedQueryFormats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.capabilities"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.capabilities">[docs]</a>    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns a list of capabilities &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.description"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.description">[docs]</a>    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the service description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.copyrightText"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.copyrightText">[docs]</a>    <span class="k">def</span> <span class="nf">copyrightText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the copyright text &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.spatialReference"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.spatialReference">[docs]</a>    <span class="k">def</span> <span class="nf">spatialReference</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the spatial reference &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_spatialReference</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.initialExtent"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.initialExtent">[docs]</a>    <span class="k">def</span> <span class="nf">initialExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the initial extent of the feature service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialExtent</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.fullExtent"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.fullExtent">[docs]</a>    <span class="k">def</span> <span class="nf">fullExtent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the full extent of the feature service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fullExtent</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.allowGeometryUpdates"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.allowGeometryUpdates">[docs]</a>    <span class="k">def</span> <span class="nf">allowGeometryUpdates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; informs the user if the data allows geometry updates &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.units"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.units">[docs]</a>    <span class="k">def</span> <span class="nf">units</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the measurement unit &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_units</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.syncEnabled"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.syncEnabled">[docs]</a>    <span class="k">def</span> <span class="nf">syncEnabled</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; informs the user if sync of data can be performed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncEnabled</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncEnabled</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.syncCapabilities"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.syncCapabilities">[docs]</a>    <span class="k">def</span> <span class="nf">syncCapabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; type of sync that can be performed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncCapabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_syncCapabilities</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.editorTrackingInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.editorTrackingInfo">[docs]</a>    <span class="k">def</span> <span class="nf">editorTrackingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editorTrackingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editorTrackingInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.hasStaticData"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.hasStaticData">[docs]</a>    <span class="k">def</span> <span class="nf">hasStaticData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.currentVersion"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.currentVersion">[docs]</a>    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the map service current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.serviceDescription"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.serviceDescription">[docs]</a>    <span class="k">def</span> <span class="nf">serviceDescription</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the serviceDescription of the map service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_serviceDescription</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.hasVersionedData"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.hasVersionedData">[docs]</a>    <span class="k">def</span> <span class="nf">hasVersionedData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean for versioned data &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasVersionedData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasVersionedData</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.supportsDisconnectedEditing"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.supportsDisconnectedEditing">[docs]</a>    <span class="k">def</span> <span class="nf">supportsDisconnectedEditing</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean is disconnecting editted supported &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsDisconnectedEditing</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsDisconnectedEditing</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.adminServiceInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.adminServiceInfo">[docs]</a>    <span class="k">def</span> <span class="nf">adminServiceInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the admin service information&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adminServiceInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_adminServiceInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.layers"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.layers">[docs]</a>    <span class="k">def</span> <span class="nf">layers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the layers for a service &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layers</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureService.asDictionary"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.asDictionary">[docs]</a>    <span class="k">def</span> <span class="nf">asDictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the feature service as a dictionary object &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_dict</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureService.addToDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.addToDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">addToDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The addToDefinition operation supports adding a definition</span>
<span class="sd">           property to a hosted feature service. The result of this</span>
<span class="sd">           operation is a response indicating success or failure with error</span>
<span class="sd">           code and description.</span>

<span class="sd">           This function will allow users to change add additional values</span>
<span class="sd">           to an already published service.</span>

<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.</span>
<span class="sd">           Output:</span>
<span class="sd">              JSON message as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;addToDefinition&quot;</span> <span class="p">:</span> <span class="n">json_dict</span><span class="p">,</span>
            <span class="s">&quot;async&quot;</span> <span class="p">:</span> <span class="bp">False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/addToDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureService.updateDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.updateDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">updateDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The updateDefinition operation supports updating a definition</span>
<span class="sd">           property in a hosted feature service. The result of this</span>
<span class="sd">           operation is a response indicating success or failure with error</span>
<span class="sd">           code and description.</span>

<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.</span>
<span class="sd">           Output:</span>
<span class="sd">              JSON Message as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;updateDefinition&quot;</span> <span class="p">:</span> <span class="n">json_dict</span><span class="p">,</span>
            <span class="s">&quot;async&quot;</span> <span class="p">:</span> <span class="bp">False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/updateDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureService.deleteFromDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureService.deleteFromDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">deleteFromDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The deleteFromDefinition operation supports deleting a</span>
<span class="sd">           definition property from a hosted feature service. The result of</span>
<span class="sd">           this operation is a response indicating success or failure with</span>
<span class="sd">           error code and description.</span>
<span class="sd">           See: http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Delete_From_Definition_Feature_Service/02r30000021w000000/</span>
<span class="sd">           for additional information on this function.</span>
<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.  Only</span>
<span class="sd">                          include the items you want to remove from the</span>
<span class="sd">                          FeatureService or layer.</span>

<span class="sd">           Output:</span>
<span class="sd">              JSON Message as dictionary</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;deleteFromDefinition&quot;</span> <span class="p">:</span> <span class="n">json_dict</span><span class="p">,</span>
            <span class="s">&quot;async&quot;</span> <span class="p">:</span> <span class="bp">False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/deleteFromDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
<span class="c">########################################################################</span></div></div>
<div class="viewcode-block" id="AdminFeatureServiceLayer"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer">[docs]</a><span class="k">class</span> <span class="nc">AdminFeatureServiceLayer</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">       The layer resource represents a single feature layer or a non</span>
<span class="sd">       spatial table in a feature service.  A feature layer is a table or</span>
<span class="sd">       view with at least one spatial column.</span>
<span class="sd">       For tables, it provides basic information about the table such as</span>
<span class="sd">       its id, name, fields, types and templates.</span>
<span class="sd">       For feature layers, in addition to the table information above, it</span>
<span class="sd">       provides information such as its geometry type, min and max scales,</span>
<span class="sd">       and spatial reference.</span>
<span class="sd">       Each type includes information about the type such as the type id,</span>
<span class="sd">       name, and definition expression.  Sub-types also include a default</span>
<span class="sd">       symbol and a list of feature templates.</span>
<span class="sd">       Each feature template includes a template name, description and a</span>
<span class="sd">       prototypical feature.</span>
<span class="sd">       The property supportsRollbackOnFailures will be true to indicate the</span>
<span class="sd">       support for transactional edits.</span>
<span class="sd">       The property maxRecordCount returns the maximum number of records</span>
<span class="sd">       that will be returned at once for a query.</span>
<span class="sd">       The property capabilities returns Query, Create, Delete, Update, and</span>
<span class="sd">       Editing capabilities. The Editing capability will be included if</span>
<span class="sd">       Create, Delete or Update is enabled for a Feature Service.</span>
<span class="sd">       Note, query and edit operations are not available on a layer in the</span>
<span class="sd">       adminstrative view.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_editFieldsInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_drawingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_typeIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_advancedQueryCapabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsRollbackOnFailureParameter</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_globalIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsAdvancedQueries</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_relationships</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_indexes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_geometryType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasStaticData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_type</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedQueryFormats</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_isDataVersioned</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_allowGeometryUpdates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_defaultVisibility</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_extent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_objectIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_htmlPopupType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_types</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasM</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_displayField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_templates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsStatistics</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasAttachments</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fields</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasZ</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_minScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_drawingInfo</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_typeIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_advancedQueryCapabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsRollbackOnFailureParameter</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_globalIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsAdvancedQueries</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_id</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_relationships</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_capabilities</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_indexes</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_currentVersion</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_geometryType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasStaticData</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_type</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportedQueryFormats</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_isDataVersioned</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_allowGeometryUpdates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_description</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_defaultVisibility</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_extent</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_objectIdField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_htmlPopupType</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_types</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasM</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_displayField</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_name</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_templates</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_supportsStatistics</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasAttachments</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_fields</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_copyrightText</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_hasZ</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_minScale</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span>
                 <span class="n">username</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">password</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">token_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">initialize</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_token_url</span> <span class="o">=</span> <span class="n">token_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">username</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span> <span class="ow">and</span> \
           <span class="ow">not</span> <span class="n">password</span> <span class="ow">is</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">token_url</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">tokenURL</span><span class="o">=</span><span class="n">token_url</span><span class="p">,</span>
                                              <span class="n">proxy_port</span><span class="o">=</span><span class="n">proxy_port</span><span class="p">,</span>
                                            <span class="n">proxy_url</span><span class="o">=</span><span class="n">proxy_url</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>   
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>                
            <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="k">print</span> <span class="s">&quot;Token was not generated&quot;</span>
            <span class="k">elif</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">res</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">initialize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
    <span class="c">#----------------------------------------------------------------------</span>
    <span class="k">def</span> <span class="nf">__init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; initializes the service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="n">json_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="n">attributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr</span> <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="nb">dir</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                      <span class="k">if</span> <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                      <span class="ow">not</span> <span class="n">attr</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&#39;_&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json_dict</span><span class="o">.</span><span class="n">iteritems</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">attributes</span><span class="p">:</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s">&quot;_&quot;</span><span class="o">+</span> <span class="n">k</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">print</span> <span class="n">k</span><span class="p">,</span> <span class="s">&quot; - attribute not implmented AdminFeatureServiceLayer.&quot;</span>
    <span class="c">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.refresh"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; refreshes a service &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/refresh&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.editFieldsInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.editFieldsInfo">[docs]</a>    <span class="k">def</span> <span class="nf">editFieldsInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the edit fields information &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editFieldsInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_editFieldsInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.advancedQueryCapabilities"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.advancedQueryCapabilities">[docs]</a>    <span class="k">def</span> <span class="nf">advancedQueryCapabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the advanced query capabilities &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_advancedQueryCapabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_advancedQueryCapabilities</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.supportsRollbackOnFailureParameter"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.supportsRollbackOnFailureParameter">[docs]</a>    <span class="k">def</span> <span class="nf">supportsRollbackOnFailureParameter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if rollback on failure supported &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsRollbackOnFailureParameter</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsRollbackOnFailureParameter</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.hasStaticData"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.hasStaticData">[docs]</a>    <span class="k">def</span> <span class="nf">hasStaticData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;boolean T/F if static data is present &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasStaticData</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.indexes"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.indexes">[docs]</a>    <span class="k">def</span> <span class="nf">indexes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;gets the indexes&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_indexes</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.templates"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.templates">[docs]</a>    <span class="k">def</span> <span class="nf">templates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets the template &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_templates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_templates</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.allowGeometryUpdates"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.allowGeometryUpdates">[docs]</a>    <span class="k">def</span> <span class="nf">allowGeometryUpdates</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns boolean if geometry updates are allowed &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_allowGeometryUpdates</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.globalIdField"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.globalIdField">[docs]</a>    <span class="k">def</span> <span class="nf">globalIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the global id field &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_globalIdField</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.objectIdField"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.objectIdField">[docs]</a>    <span class="k">def</span> <span class="nf">objectIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_objectIdField</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.currentVersion"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.currentVersion">[docs]</a>    <span class="k">def</span> <span class="nf">currentVersion</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the current version &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_currentVersion</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.id"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.id">[docs]</a>    <span class="k">def</span> <span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the id &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.name"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.name">[docs]</a>    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the name &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.type"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.type">[docs]</a>    <span class="k">def</span> <span class="nf">type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the type &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_type</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.description"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.description">[docs]</a>    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the layer&#39;s description &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_description</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.definitionExpression"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.definitionExpression">[docs]</a>    <span class="k">def</span> <span class="nf">definitionExpression</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the definitionExpression&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_definitionExpression</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_definitionExpression</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.geometryType"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.geometryType">[docs]</a>    <span class="k">def</span> <span class="nf">geometryType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the geometry type&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_geometryType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_geometryType</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.hasZ"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.hasZ">[docs]</a>    <span class="k">def</span> <span class="nf">hasZ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if it has a Z value or not &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasZ</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasZ</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.hasM"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.hasM">[docs]</a>    <span class="k">def</span> <span class="nf">hasM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns if it has a m value or not &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasM</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasM</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.copyrightText"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.copyrightText">[docs]</a>    <span class="k">def</span> <span class="nf">copyrightText</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the copyright text &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_copyrightText</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.parentLayer"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.parentLayer">[docs]</a>    <span class="k">def</span> <span class="nf">parentLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns information about the parent &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parentLayer</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.subLayers"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.subLayers">[docs]</a>    <span class="k">def</span> <span class="nf">subLayers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns sublayers for layer &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subLayers</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_subLayers</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.minScale"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.minScale">[docs]</a>    <span class="k">def</span> <span class="nf">minScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; minimum scale layer will show &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_minScale</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.maxScale"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.maxScale">[docs]</a>    <span class="k">def</span> <span class="nf">maxScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; sets the max scale &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxScale</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.effectiveMinScale"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.effectiveMinScale">[docs]</a>    <span class="k">def</span> <span class="nf">effectiveMinScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMinScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMinScale</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.effectiveMaxScale"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.effectiveMaxScale">[docs]</a>    <span class="k">def</span> <span class="nf">effectiveMaxScale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMaxScale</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_effectiveMaxScale</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.defaultVisibility"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.defaultVisibility">[docs]</a>    <span class="k">def</span> <span class="nf">defaultVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultVisibility</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_defaultVisibility</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.extent"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.extent">[docs]</a>    <span class="k">def</span> <span class="nf">extent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extent</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extent</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.timeInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.timeInfo">[docs]</a>    <span class="k">def</span> <span class="nf">timeInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timeInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.drawingInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.drawingInfo">[docs]</a>    <span class="k">def</span> <span class="nf">drawingInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawingInfo</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_drawingInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.hasAttachments"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.hasAttachments">[docs]</a>    <span class="k">def</span> <span class="nf">hasAttachments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasAttachments</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasAttachments</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.htmlPopupType"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.htmlPopupType">[docs]</a>    <span class="k">def</span> <span class="nf">htmlPopupType</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_htmlPopupType</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_htmlPopupType</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.displayField"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.displayField">[docs]</a>    <span class="k">def</span> <span class="nf">displayField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_displayField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_displayField</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.typeIdField"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.typeIdField">[docs]</a>    <span class="k">def</span> <span class="nf">typeIdField</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typeIdField</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_typeIdField</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.fields"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.fields">[docs]</a>    <span class="k">def</span> <span class="nf">fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fields</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.types"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.types">[docs]</a>    <span class="k">def</span> <span class="nf">types</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_types</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_types</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.relationships"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.relationships">[docs]</a>    <span class="k">def</span> <span class="nf">relationships</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_relationships</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.maxRecordCount"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.maxRecordCount">[docs]</a>    <span class="k">def</span> <span class="nf">maxRecordCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span> <span class="o">=</span> <span class="mi">1000</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maxRecordCount</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.canModifyLayer"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.canModifyLayer">[docs]</a>    <span class="k">def</span> <span class="nf">canModifyLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canModifyLayer</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canModifyLayer</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.supportsStatistics"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.supportsStatistics">[docs]</a>    <span class="k">def</span> <span class="nf">supportsStatistics</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsStatistics</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsStatistics</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.supportsAdvancedQueries"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.supportsAdvancedQueries">[docs]</a>    <span class="k">def</span> <span class="nf">supportsAdvancedQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAdvancedQueries</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportsAdvancedQueries</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.hasLabels"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.hasLabels">[docs]</a>    <span class="k">def</span> <span class="nf">hasLabels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasLabels</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_hasLabels</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.canScaleSymbols"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.canScaleSymbols">[docs]</a>    <span class="k">def</span> <span class="nf">canScaleSymbols</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canScaleSymbols</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_canScaleSymbols</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.capabilities"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.capabilities">[docs]</a>    <span class="k">def</span> <span class="nf">capabilities</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_capabilities</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.supportedQueryFormats"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.supportedQueryFormats">[docs]</a>    <span class="k">def</span> <span class="nf">supportedQueryFormats</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_supportedQueryFormats</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.isDataVersioned"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.isDataVersioned">[docs]</a>    <span class="k">def</span> <span class="nf">isDataVersioned</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isDataVersioned</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isDataVersioned</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.ownershipBasedAccessControlForFeatures"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.ownershipBasedAccessControlForFeatures">[docs]</a>    <span class="k">def</span> <span class="nf">ownershipBasedAccessControlForFeatures</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ownershipBasedAccessControlForFeatures</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ownershipBasedAccessControlForFeatures</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AdminFeatureServiceLayer.useStandardizedQueries"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.useStandardizedQueries">[docs]</a>    <span class="k">def</span> <span class="nf">useStandardizedQueries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useStandardizedQueries</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__init</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_useStandardizedQueries</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureServiceLayer.addToDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.addToDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">addToDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The addToDefinition operation supports adding a definition</span>
<span class="sd">           property to a hosted feature service. The result of this</span>
<span class="sd">           operation is a response indicating success or failure with error</span>
<span class="sd">           code and description.</span>

<span class="sd">           This function will allow users to change add additional values</span>
<span class="sd">           to an already published service.</span>

<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.</span>
<span class="sd">           Output:</span>
<span class="sd">              JSON message as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;addToDefinition&quot;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_dict</span><span class="p">),</span>
            <span class="c">#&quot;async&quot; : False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/addToDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureServiceLayer.updateDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.updateDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">updateDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The updateDefinition operation supports updating a definition</span>
<span class="sd">           property in a hosted feature service. The result of this</span>
<span class="sd">           operation is a response indicating success or failure with error</span>
<span class="sd">           code and description.</span>

<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.</span>
<span class="sd">           Output:</span>
<span class="sd">              JSON Message as dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;updateDefinition&quot;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_dict</span><span class="p">),</span>
            <span class="s">&quot;async&quot;</span> <span class="p">:</span> <span class="bp">False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/updateDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AdminFeatureServiceLayer.deleteFromDefinition"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AdminFeatureServiceLayer.deleteFromDefinition">[docs]</a>    <span class="k">def</span> <span class="nf">deleteFromDefinition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">json_dict</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The deleteFromDefinition operation supports deleting a</span>
<span class="sd">           definition property from a hosted feature service. The result of</span>
<span class="sd">           this operation is a response indicating success or failure with</span>
<span class="sd">           error code and description.</span>
<span class="sd">           See: http://resources.arcgis.com/en/help/arcgis-rest-api/index.html#/Delete_From_Definition_Feature_Service/02r30000021w000000/</span>
<span class="sd">           for additional information on this function.</span>
<span class="sd">           Input:</span>
<span class="sd">              json_dict - part to add to host service.  The part format can</span>
<span class="sd">                          be derived from the asDictionary property.  For</span>
<span class="sd">                          layer level modifications, run updates on each</span>
<span class="sd">                          individual feature service layer object.  Only</span>
<span class="sd">                          include the items you want to remove from the</span>
<span class="sd">                          FeatureService or layer.</span>

<span class="sd">           Output:</span>
<span class="sd">              JSON Message as dictionary</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;deleteFromDefinition&quot;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">json_dict</span><span class="p">),</span>
            <span class="c">#&quot;async&quot; : False</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/deleteFromDefinition&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
<span class="c">########################################################################</span></div></div>
<div class="viewcode-block" id="AGOL"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL">[docs]</a><span class="k">class</span> <span class="nc">AGOL</span><span class="p">(</span><span class="n">BaseAGOLClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; publishes to AGOL &quot;&quot;&quot;</span>
    <span class="n">_username</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_password</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_token</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">_org_url</span> <span class="o">=</span><span class="s">&quot;http://www.arcgis.com&quot;</span>
    <span class="n">_url</span> <span class="o">=</span> <span class="s">&quot;http://www.arcgis.com/sharing/rest&quot;</span>
    <span class="n">_token_url</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">org_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">rest_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">token_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">referer_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; constructor &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="o">=</span> <span class="n">username</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_password</span> <span class="o">=</span> <span class="n">password</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span> <span class="o">=</span> <span class="n">proxy_url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span> <span class="o">=</span> <span class="n">proxy_port</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initURL</span><span class="p">(</span><span class="n">org_url</span><span class="p">,</span> <span class="n">rest_url</span><span class="p">,</span><span class="n">token_url</span><span class="p">,</span><span class="n">referer_url</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">generate_token</span><span class="p">(</span><span class="n">proxy_port</span><span class="o">=</span><span class="n">proxy_port</span><span class="p">,</span>
                                          <span class="n">proxy_url</span><span class="o">=</span><span class="n">proxy_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c">#----------------------------------------------------------------------</span>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AGOL.orgURL"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.orgURL">[docs]</a>    <span class="k">def</span> <span class="nf">orgURL</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the Portal&#39;s base org url&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_org_url</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="nd">@property</span>
<div class="viewcode-block" id="AGOL.contentRootURL"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.contentRootURL">[docs]</a>    <span class="k">def</span> <span class="nf">contentRootURL</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns the Portal&#39;s content root &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/content&quot;</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.addComment"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.addComment">[docs]</a>    <span class="k">def</span> <span class="nf">addComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; adds a comment to a given item.  Must be authenticated &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/items/</span><span class="si">%s</span><span class="s">/addComment&quot;</span> <span class="o">%</span> <span class="n">item_id</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;comment&quot;</span> <span class="p">:</span> <span class="n">comment</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.addRating"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.addRating">[docs]</a>    <span class="k">def</span> <span class="nf">addRating</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">,</span> <span class="n">rating</span><span class="o">=</span><span class="mf">5.0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Adds a rating to an item between 1.0 and 5.0&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">rating</span> <span class="o">&gt;</span> <span class="mf">5.0</span><span class="p">:</span>
            <span class="n">rating</span> <span class="o">=</span> <span class="mf">5.0</span>
        <span class="k">elif</span> <span class="n">rating</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="n">rating</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/items/</span><span class="si">%s</span><span class="s">/addRating&quot;</span> <span class="o">%</span> <span class="n">item_id</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span><span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;rating&quot;</span> <span class="p">:</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">rating</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.createFolder"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.createFolder">[docs]</a>    <span class="k">def</span> <span class="nf">createFolder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; creats a folder for a user&#39;s agol account &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/users/</span><span class="si">%s</span><span class="s">/createFolder&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;title&quot;</span> <span class="p">:</span> <span class="n">folder_name</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.deleteFolder"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.deleteFolder">[docs]</a>    <span class="k">def</span> <span class="nf">deleteFolder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; deletes a user&#39;s folder &quot;&quot;&quot;</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/users/</span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">/delete&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">,</span> <span class="n">item_id</span><span class="p">)</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.item"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.item">[docs]</a>    <span class="k">def</span> <span class="nf">item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns information about an item on agol/portal &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/items/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">item_id</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.itemData"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.itemData">[docs]</a>    <span class="k">def</span> <span class="nf">itemData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; returns data for an item on agol/portal &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
        <span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">contentRootURL</span> <span class="o">+</span> <span class="s">&quot;/items/</span><span class="si">%s</span><span class="s">/data&quot;</span> <span class="o">%</span> <span class="n">item_id</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="k">def</span> <span class="nf">_prep_mxd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mxd</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; ensures the requires mxd properties are set to something &quot;&quot;&quot;</span>
        <span class="n">changed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">author</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">credits</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">credits</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">summary</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">summary</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">mxd</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s">&quot;&quot;</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s">&quot;NA&quot;</span>
            <span class="n">changed</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="n">changed</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">mxd</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">mxd</span>
    <span class="c">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="AGOL.getUserContent"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.getUserContent">[docs]</a>    <span class="k">def</span> <span class="nf">getUserContent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets a user&#39;s content on agol &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;token&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
                <span class="s">&quot;f&quot;</span><span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>
        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                            <span class="n">param_dict</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                            <span class="n">header</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;Accept-Encoding&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">},</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jres</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.getUserInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.getUserInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getUserInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets a user&#39;s info on agol &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;token&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
                <span class="s">&quot;f&quot;</span><span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                            <span class="n">header</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;Accept-Encoding&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">},</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jres</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.getUserCommunityInfo"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.getUserCommunityInfo">[docs]</a>    <span class="k">def</span> <span class="nf">getUserCommunityInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; gets a user&#39;s info on agol &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;token&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
                <span class="s">&quot;f&quot;</span><span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">}</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;{}/community/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                            <span class="n">header</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;Accept-Encoding&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">},</span>
                            <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                            <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jres</span>
      <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.addFile"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.addFile">[docs]</a>    <span class="k">def</span> <span class="nf">addFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">agol_type</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; loads a file to AGOL &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;filename&quot;</span> <span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span>
            <span class="s">&quot;type&quot;</span> <span class="p">:</span> <span class="n">agol_type</span><span class="p">,</span>
            <span class="s">&quot;title&quot;</span> <span class="p">:</span> <span class="n">name</span><span class="p">,</span>
            <span class="s">&quot;tags&quot;</span> <span class="p">:</span> <span class="n">tags</span><span class="p">,</span>
            <span class="s">&quot;description&quot;</span> <span class="p">:</span> <span class="n">description</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;{}/content/users/{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
                                                   <span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>
        <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/addItem&#39;</span>
        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;file&#39;</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_path</span><span class="p">)))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_multipart</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                                   <span class="n">selector</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                   <span class="n">files</span> <span class="o">=</span> <span class="n">files</span><span class="p">,</span>
                                   <span class="n">fields</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                   <span class="n">port</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                                   <span class="n">ssl</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;https&#39;</span><span class="p">,</span>
                                   <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                   <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">res</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.addItem"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.addItem">[docs]</a>    <span class="k">def</span> <span class="nf">addItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">name</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span><span class="n">snippet</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">extent</span><span class="p">,</span><span class="n">item_type</span><span class="o">=</span><span class="s">&#39;Web Map&#39;</span><span class="p">,</span><span class="n">thumbnail</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">typeKeywords</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="s">&quot;ArcGIS Online&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Collector&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Data Editing&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Explorer Web Map&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Map&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Offline&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Online Map&quot;</span><span class="p">,</span>
                    <span class="s">&quot;Web Map&quot;</span>
                    <span class="p">]</span>
                <span class="p">):</span>
            <span class="sd">&quot;&quot;&quot; loads a file to AGOL &quot;&quot;&quot;</span>

            <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
                <span class="s">&quot;text&quot;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">),</span>
                <span class="s">&quot;type&quot;</span> <span class="p">:</span> <span class="n">item_type</span><span class="p">,</span>
                <span class="s">&quot;title&quot;</span> <span class="p">:</span> <span class="n">name</span><span class="p">,</span>
                <span class="s">&quot;tags&quot;</span> <span class="p">:</span> <span class="n">tags</span><span class="p">,</span>
                <span class="s">&quot;description&quot;</span> <span class="p">:</span> <span class="n">description</span><span class="p">,</span>
                <span class="s">&quot;snippet&quot;</span> <span class="p">:</span> <span class="n">snippet</span><span class="p">,</span>
                <span class="s">&quot;extent&quot;</span><span class="p">:</span> <span class="n">extent</span><span class="p">,</span>
                <span class="s">&quot;typeKeywords&quot;</span><span class="p">:</span><span class="n">typeKeywords</span><span class="p">,</span>
                <span class="s">&quot;thumbnail&quot;</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

            <span class="n">url</span> <span class="o">=</span> <span class="s">&quot;{}/content/users/{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
                                                       <span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
                <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/addItem&#39;</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;thumbnail&#39;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)))</span>

            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_multipart</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                                       <span class="n">selector</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                       <span class="n">fields</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                       <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                                       <span class="n">ssl</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;https&#39;</span><span class="p">,</span>
                                       <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                       <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                       <span class="n">port</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">)</span>
            <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">res</span>




    <span class="c">#----------------------------------------------------------------------</span>
    <span class="c">#def addWebmap(self,  name, tags, description,snippet,data,extent,agol_type=&#39;Web Map&#39;,thumbnail=&#39;&#39;,folder=None):</span>
        <span class="c">#&quot;&quot;&quot; loads a file to AGOL &quot;&quot;&quot;</span>
        <span class="c">#params = {</span>
            <span class="c">#&quot;f&quot; : &quot;json&quot;,</span>
            <span class="c">#&quot;text&quot; : json.dumps(data),</span>
            <span class="c">#&quot;type&quot; : agol_type,</span>
            <span class="c">#&quot;title&quot; : name,</span>
            <span class="c">#&quot;tags&quot; : tags,</span>
            <span class="c">#&quot;description&quot; : description,</span>
            <span class="c">#&quot;snippet&quot; : snippet,</span>
            <span class="c">#&quot;extent&quot;: extent,</span>
            <span class="c">#&quot;typeKeywords&quot;: [</span>
                <span class="c">#&quot;ArcGIS Online&quot;,</span>
                <span class="c">#&quot;Collector&quot;,</span>
                <span class="c">#&quot;Data Editing&quot;,</span>
                <span class="c">#&quot;Explorer Web Map&quot;,</span>
                <span class="c">#&quot;Map&quot;,</span>
                <span class="c">#&quot;Offline&quot;,</span>
                <span class="c">#&quot;Online Map&quot;,</span>
                <span class="c">#&quot;Web Map&quot;</span>
            <span class="c">#],</span>
            <span class="c">#&quot;thumbnail&quot;: os.path.basename(thumbnail)</span>
        <span class="c">#}</span>

        <span class="c">#if self._token is not None:</span>
            <span class="c">#params[&#39;token&#39;] = self._token</span>

        <span class="c">#url = &quot;{}/content/users/{}&quot;.format(self._url,</span>
                                                   <span class="c">#self._username)</span>
        <span class="c">#if folder:</span>
            <span class="c">#url += &#39;/&#39; + folder</span>
        <span class="c">#url += &#39;/addItem&#39;</span>
        <span class="c">#parsed = urlparse.urlparse(url)</span>

        <span class="c">#files = []</span>
        <span class="c">#files.append((&#39;thumbnail&#39;, thumbnail, os.path.basename(thumbnail)))</span>

        <span class="c">#res = self._post_multipart(host=parsed.hostname,</span>
                                   <span class="c">#selector=parsed.path,</span>
                                   <span class="c">#fields=params,</span>
                                   <span class="c">#files=files,</span>
                                   <span class="c">#ssl=parsed.scheme.lower() == &#39;https&#39;,</span>
                                   <span class="c">#proxy_port=self._proxy_port,</span>
                                   <span class="c">#proxy_url=self._proxy_url,</span>
                                   <span class="c">#port=parsed.port)</span>
        <span class="c">#res = self._unicode_convert(json.loads(res))</span>
        <span class="c">#return res</span>


    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.updateItem"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.updateItem">[docs]</a>    <span class="k">def</span> <span class="nf">updateItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">agol_id</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot; update an items details&quot;&quot;&quot;</span>
        <span class="n">update_url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/update&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agol_id</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;text&quot;</span> <span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">update_url</span><span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_multipart</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                                   <span class="n">selector</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                   <span class="n">fields</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                   <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                                   <span class="n">port</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                                   <span class="n">ssl</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;https&#39;</span><span class="p">,</span>
                                   <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                   <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>



    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.enableProtect"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.enableProtect">[docs]</a>    <span class="k">def</span> <span class="nf">enableProtect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Enables an items protection  &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/protect&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jres</span>
    <span class="c">#----------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="AGOL.disableProtect"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.disableProtect">[docs]</a>    <span class="k">def</span> <span class="nf">disableProtect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Disables an items protection &quot;&quot;&quot;</span>

        <span class="n">url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/unprotect&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">jres</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.deleteItem"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.deleteItem">[docs]</a>    <span class="k">def</span> <span class="nf">deleteItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">force_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; deletes an agol item by it&#39;s ID &quot;&quot;&quot;</span>

        <span class="n">deleteURL</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_username</span> <span class="p">)</span>
        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">deleteURL</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">deleteURL</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/delete&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">item_id</span><span class="p">)</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">jres</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">deleteURL</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">jres</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">force_delete</span><span class="p">:</span>
                <span class="n">dis_res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">disableProtect</span><span class="p">(</span><span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="p">)</span>
                <span class="k">if</span> <span class="s">&#39;success&#39;</span> <span class="ow">in</span> <span class="n">dis_res</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteItem</span><span class="p">(</span><span class="n">item_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span><span class="n">force_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">jres</span>
        <span class="k">return</span> <span class="n">jres</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="k">def</span> <span class="nf">_modify_sddraft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sddraft</span><span class="p">,</span><span class="n">capabilities</span><span class="p">,</span><span class="n">maxRecordCount</span><span class="o">=</span><span class="s">&#39;1000&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; modifies the sddraft for agol publishing &quot;&quot;&quot;</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">sddraft</span><span class="p">)</span>

        <span class="n">root_elem</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">root_elem</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="s">&quot;SVCManifest&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Root tag is incorrect. Is {} a .sddraft file?&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">sddraft</span><span class="p">))</span>

        <span class="c"># The following 6 code pieces modify the SDDraft from a new MapService</span>
        <span class="c"># with caching capabilities to a FeatureService with Query,Create,</span>
        <span class="c"># Update,Delete,Uploads,Editing capabilities as well as the ability to set the max</span>
        <span class="c"># records on the service.</span>
        <span class="c"># The first two lines (commented out) are no longer necessary as the FS</span>
        <span class="c"># is now being deleted and re-published, not truly overwritten as is the</span>
        <span class="c"># case when publishing from Desktop.</span>
        <span class="c"># The last three pieces change Map to Feature Service, disable caching</span>
        <span class="c"># and set appropriate capabilities. You can customize the capabilities by</span>
        <span class="c"># removing items.</span>
        <span class="c"># Note you cannot disable Query from a Feature Service.</span>

        <span class="c"># Change service type from map service to feature service</span>
        <span class="k">for</span> <span class="n">desc</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;Type&#39;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">desc</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&quot;esriServiceDefinitionType_New&quot;</span><span class="p">:</span>
                <span class="n">desc</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&#39;esriServiceDefinitionType_Replacement&#39;</span>

        <span class="k">for</span> <span class="n">config</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;./Configurations/SVCConfiguration/TypeName&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&quot;MapServer&quot;</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;FeatureServer&quot;</span>

        <span class="c">#Turn off caching</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;./Configurations/SVCConfiguration/Definition/&quot;</span> <span class="o">+</span>
                                <span class="s">&quot;ConfigurationProperties/PropertyArray/&quot;</span> <span class="o">+</span>
                                <span class="s">&quot;PropertySetProperty&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Key&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&#39;isCached&#39;</span><span class="p">:</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;false&quot;</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Key&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&#39;maxRecordCount&#39;</span><span class="p">:</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">maxRecordCount</span>

        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;./Configurations/SVCConfiguration/Definition/Extensions/SVCExtension&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;TypeName&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&#39;KmlServer&#39;</span><span class="p">:</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Enabled&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">&quot;false&quot;</span>

        <span class="c"># Turn on feature access capabilities</span>
        <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&quot;./Configurations/SVCConfiguration/Definition/Info/PropertyArray/PropertySetProperty&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Key&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">&#39;WebCapabilities&#39;</span><span class="p">:</span>
                <span class="n">prop</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;Value&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">capabilities</span>

        <span class="c"># Add the namespaces which get stripped, back into the .SD</span>
        <span class="n">root_elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s">&quot;xmlns:typens&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;http://www.esri.com/schemas/ArcGIS/10.1&#39;</span>
        <span class="n">root_elem</span><span class="o">.</span><span class="n">attrib</span><span class="p">[</span><span class="s">&quot;xmlns:xs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;http://www.w3.org/2001/XMLSchema&#39;</span>
        <span class="n">newSDdraft</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">sddraft</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;draft_mod.sddraft&quot;</span>
        <span class="c"># Write the new draft to disk</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">newSDdraft</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">doc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s">&#39;utf-8&#39;</span><span class="p">)</span>
        <span class="k">del</span> <span class="n">doc</span>
        <span class="k">return</span> <span class="n">newSDdraft</span>


   <span class="c">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="AGOL.enableSharingUserItem"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.enableSharingUserItem">[docs]</a>    <span class="k">def</span> <span class="nf">enableSharingUserItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agol_id</span><span class="p">,</span> <span class="n">everyone</span><span class="o">=</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="n">orgs</span><span class="o">=</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="s">&#39;None&#39;</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes an items sharing permissions &quot;&quot;&quot;</span>
        <span class="n">share_url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">share_url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">share_url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/share&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agol_id</span><span class="p">)</span>



        <span class="k">if</span> <span class="n">groups</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;everyone&#39;</span> <span class="p">:</span> <span class="n">everyone</span><span class="p">,</span>
                      <span class="s">&#39;org&#39;</span> <span class="p">:</span> <span class="n">orgs</span><span class="p">,</span>
                      <span class="s">&#39;groups&#39;</span> <span class="p">:</span> <span class="n">groups</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">share_url</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.enableSharing"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.enableSharing">[docs]</a>    <span class="k">def</span> <span class="nf">enableSharing</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agol_id</span><span class="p">,</span> <span class="n">everyone</span><span class="o">=</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="n">orgs</span><span class="o">=</span><span class="s">&#39;true&#39;</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="s">&#39;None&#39;</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes an items sharing permissions &quot;&quot;&quot;</span>
        <span class="n">share_url</span> <span class="o">=</span> <span class="s">&#39;{}/content&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">)</span>


        <span class="n">share_url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/share&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agol_id</span><span class="p">)</span>



        <span class="k">if</span> <span class="n">groups</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">groups</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;everyone&#39;</span> <span class="p">:</span> <span class="n">everyone</span><span class="p">,</span>
                      <span class="s">&#39;org&#39;</span> <span class="p">:</span> <span class="n">orgs</span><span class="p">,</span>
                      <span class="s">&#39;groups&#39;</span> <span class="p">:</span> <span class="n">groups</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">share_url</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.updateTitle"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.updateTitle">[docs]</a>    <span class="k">def</span> <span class="nf">updateTitle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agol_id</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; changes an items title&quot;&quot;&quot;</span>
        <span class="n">update_url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/update&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agol_id</span><span class="p">)</span>

        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;title&#39;</span> <span class="p">:</span> <span class="n">title</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">}</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">update_url</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.updateThumbnail"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.updateThumbnail">[docs]</a>    <span class="k">def</span> <span class="nf">updateThumbnail</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agol_id</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; update an items thumbnail&quot;&quot;&quot;</span>
        <span class="n">update_url</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">update_url</span> <span class="o">+=</span> <span class="s">&#39;/items/{}/update&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">agol_id</span><span class="p">)</span>

        <span class="n">params</span>  <span class="o">=</span> <span class="p">{</span><span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&quot;thumbnail&quot;</span><span class="p">:</span>  <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>
                      <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">update_url</span><span class="p">)</span>

        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;thumbnail&#39;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_multipart</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                                   <span class="n">port</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                                   <span class="n">selector</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                   <span class="n">fields</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                   <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                                   <span class="n">ssl</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;https&#39;</span><span class="p">,</span>
                                   <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">,</span>
                                   <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">)</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unicode_convert</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.delete_items"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.delete_items">[docs]</a>    <span class="k">def</span> <span class="nf">delete_items</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">items</span><span class="p">,</span><span class="n">item_type</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">force_delete</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserContent</span><span class="p">(</span><span class="n">folder</span><span class="p">)</span>
        <span class="n">itemID</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="c">#Title, item</span>
        <span class="n">resultList</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">if</span> <span class="s">&#39;items&#39;</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="s">&#39;items&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">items</span> <span class="ow">and</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">item_type</span><span class="p">:</span>

                    <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteItem</span><span class="p">(</span><span class="n">item_id</span><span class="o">=</span><span class="n">item</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">],</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">,</span><span class="n">force_delete</span><span class="o">=</span><span class="n">force_delete</span><span class="p">)</span>
                    <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                        <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s">&#39;error&#39;</span><span class="p">])</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">resultList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">resultList</span>
    <span class="c">#----------------------------------------------------------------------</span>
</div>
<div class="viewcode-block" id="AGOL.publish_to_agol"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.publish_to_agol">[docs]</a>    <span class="k">def</span> <span class="nf">publish_to_agol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mxd_path</span><span class="p">,</span> <span class="n">service_name</span><span class="o">=</span><span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s">&quot;None&quot;</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">capabilities</span> <span class="o">=</span><span class="s">&#39;Query,Create,Update,Delete,Uploads,Editing,Sync&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; publishes a service to AGOL &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">mxd_path</span><span class="p">):</span>
            <span class="n">sciptPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="n">mxd_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sciptPath</span><span class="p">,</span><span class="n">mxd_path</span><span class="p">)</span>

        <span class="n">mxd</span> <span class="o">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">MapDocument</span><span class="p">(</span><span class="n">mxd_path</span><span class="p">)</span>
        <span class="n">sddraftFolder</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scratchFolder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;draft&quot;</span>
        <span class="n">sdFolder</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">scratchFolder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;sd&quot;</span>
        <span class="n">sddraft</span> <span class="o">=</span> <span class="n">sddraftFolder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="n">service_name</span> <span class="o">+</span> <span class="s">&quot;.sddraft&quot;</span>
        <span class="n">sd</span> <span class="o">=</span> <span class="n">sdFolder</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s">.sd&quot;</span> <span class="o">%</span> <span class="n">service_name</span>
        <span class="n">mxd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_prep_mxd</span><span class="p">(</span><span class="n">mxd</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">service_name</span> <span class="o">==</span> <span class="s">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">service_name</span> <span class="o">=</span> <span class="n">mxd</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tags</span> <span class="o">==</span> <span class="s">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">tags</span> <span class="o">=</span> <span class="n">mxd</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">description</span> <span class="o">==</span> <span class="s">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">description</span> <span class="o">=</span> <span class="n">mxd</span><span class="o">.</span><span class="n">description</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">sddraftFolder</span><span class="p">)</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sddraftFolder</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">sddraftFolder</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sddraftFolder</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">sddraft</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">sddraft</span><span class="p">)</span>
        <span class="n">analysis</span> <span class="o">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">CreateMapSDDraft</span><span class="p">(</span><span class="n">mxd</span><span class="p">,</span> <span class="n">sddraft</span><span class="p">,</span>
                                            <span class="n">service_name</span><span class="p">,</span>
                                            <span class="s">&quot;MY_HOSTED_SERVICES&quot;</span><span class="p">)</span>
        <span class="n">sddraft</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_modify_sddraft</span><span class="p">(</span><span class="n">sddraft</span><span class="o">=</span><span class="n">sddraft</span><span class="p">,</span><span class="n">capabilities</span><span class="o">=</span><span class="n">capabilities</span><span class="p">)</span>
        <span class="n">analysis</span> <span class="o">=</span> <span class="n">mapping</span><span class="o">.</span><span class="n">AnalyzeForSD</span><span class="p">(</span><span class="n">sddraft</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">sdFolder</span><span class="p">):</span>
            <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="n">sdFolder</span><span class="p">,</span> <span class="n">ignore_errors</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sdFolder</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">sdFolder</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">analysis</span><span class="p">[</span><span class="s">&#39;errors&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="p">{}:</span>
            <span class="c"># Stage the service</span>
            <span class="n">arcpy</span><span class="o">.</span><span class="n">StageService_server</span><span class="p">(</span><span class="n">sddraft</span><span class="p">,</span> <span class="n">sd</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c"># If the sddraft analysis contained errors, display them and quit.</span>
            <span class="k">print</span> <span class="n">analysis</span><span class="p">[</span><span class="s">&#39;errors&#39;</span><span class="p">]</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
        <span class="c"># POST data to site</span>
        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserContent</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
        <span class="c">#Title, item</span>
        <span class="k">if</span> <span class="s">&#39;items&#39;</span> <span class="ow">in</span> <span class="n">content</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">content</span><span class="p">[</span><span class="s">&#39;items&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">service_name</span> <span class="ow">and</span> \
                   <span class="n">item</span><span class="p">[</span><span class="s">&#39;item&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">sd</span><span class="p">):</span>
                    <span class="k">print</span> <span class="s">&quot;Deleted: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]))</span>

                <span class="k">elif</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">service_name</span><span class="p">:</span>
                    <span class="k">print</span> <span class="s">&quot;Deleted: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_tostr</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">deleteItem</span><span class="p">(</span><span class="n">item</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]))</span>

        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFile</span><span class="p">(</span><span class="n">sd</span><span class="p">,</span> <span class="n">agol_type</span><span class="o">=</span><span class="s">&quot;Service Definition&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">service_name</span><span class="p">,</span>
                                             <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&quot;success&quot;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_agol_id</span> <span class="o">=</span>  <span class="n">res</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">res</span>

        <span class="k">del</span> <span class="n">mxd</span>
        <span class="n">p_vals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_publish</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_agol_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">p_vals</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">p_vals</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">p_vals</span>

    <span class="c">##----------------------------------------------------------------------</span>
    <span class="c">#def publishWebMap(self, name,tags,snippet,description,extent,data,thumbnail,share_everyone,share_org,share_groups,folder_name=None,protected=False,delete_existing = False):</span>
        <span class="c">#&quot;&quot;&quot;</span>
           <span class="c">#The publishWebMap function publishes a web map, sets the details,</span>
           <span class="c">#and shares it with the organization.</span>

           <span class="c">#Inputs:</span>
              <span class="c">#name - the name for the webmap</span>
              <span class="c">#tags - the tags for the web map</span>
              <span class="c">#snippet - the breif summary for the webmap</span>
              <span class="c">#description - the description for the webmap</span>
              <span class="c">#extent - Extent in the following format: &quot;xmin, ymin, xmax, ymax&quot;</span>
              <span class="c">#data - the json representation of the webmap</span>
              <span class="c">#thumbnail - full path or absolute path to the image for the webmap</span>
                <span class="c">#200x133 is the suggested side.</span>
              <span class="c">#share_everyone - True/False to share map with everyone</span>
               <span class="c">#share_org - True/False to share map with Org</span>
              <span class="c">#share_groups - List of groups to share the map with</span>
              <span class="c">#folderName - optional folder name to store the item in</span>
           <span class="c">#Output:</span>
              <span class="c">#WebMapID - returns the webmap id if created or updated</span>
        <span class="c">#&quot;&quot;&quot;</span>
        <span class="c">#if os.path.isfile(thumbnail):</span>
            <span class="c">#if not os.path.isabs(thumbnail):</span>
                <span class="c">#thumbnail = os.path.abspath(thumbnail)</span>


        <span class="c">#folderID = self.get_folder_ID(folder_name=folder_name)</span>
        <span class="c">#if delete_existing:</span>
            <span class="c">#items = [name]</span>
            <span class="c">#self.delete_items(items,folderID,item_type=&quot;Web Map&quot;,force_delete=delete_existing)</span>



        <span class="c">#item_id = self.get_item_ID(item_name=name,item_type=&#39;Web Map&#39;, folder=folderID)</span>
        <span class="c">#if item_id is not None:</span>
            <span class="c">#webmapInfo = self.updateItem(agol_id=item_id,data=data,folder=folderID)</span>
            <span class="c">#if &#39;error&#39; in webmapInfo:</span>
                <span class="c">#raise ValueError(str(webmapInfo))</span>
        <span class="c">#else:</span>
            <span class="c">#webmapInfo = self.addItem(name=name,tags=tags,snippet=snippet,description=description,extent=extent,data=data,thumbnail=thumbnail,folder=folderID,item_type=&#39;Web Map&#39;)</span>
            <span class="c">#if &#39;error&#39; in webmapInfo:</span>
                <span class="c">#raise ValueError(str(webmapInfo))</span>

            <span class="c">#item_id = webmapInfo[&#39;id&#39;]</span>
            <span class="c">#if protected:</span>
                <span class="c">#self.enableProtect(item_id,folderID)</span>

            <span class="c">#group_ids = self.get_group_IDs(share_groups)</span>


            <span class="c">#result= self.enableSharing(agol_id=item_id, everyone=share_everyone.lower()== &quot;true&quot; , orgs= share_org.lower()== &quot;true&quot;, groups=&#39;,&#39;.join(group_ids),folder=folderID)</span>
            <span class="c">#if &#39;error&#39; in result:</span>
                <span class="c">#raise ValueError(str(result))</span>



        <span class="c">#return item_id</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.publishItem"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.publishItem">[docs]</a>    <span class="k">def</span> <span class="nf">publishItem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span><span class="n">tags</span><span class="p">,</span><span class="n">snippet</span><span class="p">,</span><span class="n">description</span><span class="p">,</span><span class="n">extent</span><span class="p">,</span><span class="n">data</span><span class="p">,</span><span class="n">thumbnail</span><span class="p">,</span><span class="n">share_everyone</span><span class="p">,</span><span class="n">share_org</span><span class="p">,</span><span class="n">share_groups</span><span class="p">,</span><span class="n">item_type</span><span class="p">,</span><span class="n">typeKeywords</span><span class="p">,</span><span class="n">folder_name</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">protected</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">delete_existing</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The publish function publishes a item, sets the details,</span>
<span class="sd">           and shares it with the organization.</span>

<span class="sd">           Inputs:</span>
<span class="sd">              name - the name for the webmap</span>
<span class="sd">              tags - the tags for the web map</span>
<span class="sd">              snippet - the breif summary for the webmap</span>
<span class="sd">              description - the description for the webmap</span>
<span class="sd">              extent - Extent in the following format: &quot;xmin, ymin, xmax, ymax&quot;</span>
<span class="sd">              data - the json representation of the webmap</span>
<span class="sd">              thumbnail - full path or absolute path to the image for the webmap</span>
<span class="sd">                200x133 is the suggested side.</span>
<span class="sd">              share_everyone - True/False to share map with everyone</span>
<span class="sd">               share_org - True/False to share map with Org</span>
<span class="sd">              share_groups - List of groups to share the map with</span>
<span class="sd">              folderName - optional folder name to store the item in</span>
<span class="sd">           Output:</span>
<span class="sd">              ItemID - returns the webmap id if created or updated</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">):</span>
                <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>


        <span class="n">folderID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_folder_ID</span><span class="p">(</span><span class="n">folder_name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">)</span>

        <span class="n">item_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_item_ID</span><span class="p">(</span><span class="n">item_name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">item_type</span><span class="o">=</span><span class="n">item_type</span><span class="p">,</span> <span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">delete_existing</span> <span class="ow">and</span> <span class="n">item_id</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deleteItem</span><span class="p">(</span><span class="n">item_id</span> <span class="o">=</span><span class="n">item_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">,</span><span class="n">force_delete</span><span class="o">=</span><span class="n">delete_existing</span><span class="p">)</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="bp">None</span>

        <span class="k">if</span> <span class="n">item_id</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">itemInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateItem</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">itemInfo</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">itemInfo</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">itemInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span><span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">,</span><span class="n">snippet</span><span class="o">=</span><span class="n">snippet</span><span class="p">,</span><span class="n">description</span><span class="o">=</span><span class="n">description</span><span class="p">,</span><span class="n">extent</span><span class="o">=</span><span class="n">extent</span><span class="p">,</span><span class="n">item_type</span><span class="o">=</span><span class="n">item_type</span><span class="p">,</span><span class="n">typeKeywords</span><span class="o">=</span><span class="n">typeKeywords</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">thumbnail</span><span class="o">=</span><span class="n">thumbnail</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">itemInfo</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">itemInfo</span><span class="p">))</span>

            <span class="n">item_id</span> <span class="o">=</span> <span class="n">itemInfo</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">protected</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">enableProtect</span><span class="p">(</span><span class="n">item_id</span><span class="p">,</span><span class="n">folderID</span><span class="p">)</span>

            <span class="n">group_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_IDs</span><span class="p">(</span><span class="n">share_groups</span><span class="p">)</span>


            <span class="n">result</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enableSharing</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span> <span class="n">everyone</span><span class="o">=</span><span class="n">share_everyone</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span> <span class="s">&quot;true&quot;</span> <span class="p">,</span> <span class="n">orgs</span><span class="o">=</span> <span class="n">share_org</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">group_ids</span><span class="p">),</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">result</span><span class="p">))</span>



        <span class="k">return</span> <span class="n">item_id</span>

     <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.get_group_IDs"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.get_group_IDs">[docs]</a>    <span class="k">def</span> <span class="nf">get_group_IDs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group_names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           This function retrieves the group IDs</span>

<span class="sd">           Inputs:</span>
<span class="sd">              group_names - tuple of group names</span>

<span class="sd">           Output:</span>
<span class="sd">              dict - list of group IDs</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">group_ids</span><span class="o">=</span><span class="p">[]</span>
        <span class="n">userInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserCommunityInfo</span><span class="p">()</span>
        <span class="k">if</span> <span class="s">&#39;groups&#39;</span> <span class="ow">in</span> <span class="n">userInfo</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">gp</span> <span class="ow">in</span> <span class="n">userInfo</span><span class="p">[</span><span class="s">&#39;groups&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">gp</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">group_names</span><span class="p">:</span>
                    <span class="n">group_ids</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">gp</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">])</span>
        <span class="k">del</span> <span class="n">userInfo</span>
        <span class="k">return</span> <span class="n">group_ids</span>
   <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.get_folder_ID"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.get_folder_ID">[docs]</a>    <span class="k">def</span> <span class="nf">get_folder_ID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">folder_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           This function retrieves the folder ID and creates the folder if</span>
<span class="sd">           it does not exist</span>

<span class="sd">           Inputs:</span>
<span class="sd">              folder_name - the name of the folder</span>

<span class="sd">           Output:</span>
<span class="sd">              string - ID of folder, none if no foldername is specified</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">folder_name</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">folder_name</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="n">userContent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserContent</span><span class="p">()</span>
            <span class="n">folderID</span> <span class="o">=</span> <span class="bp">None</span>
            <span class="k">if</span> <span class="s">&#39;folders&#39;</span> <span class="ow">in</span> <span class="n">userContent</span><span class="p">:</span>
                <span class="n">folders</span> <span class="o">=</span> <span class="n">userContent</span><span class="p">[</span><span class="s">&#39;folders&#39;</span><span class="p">]</span>

                <span class="k">for</span> <span class="n">folder</span> <span class="ow">in</span> <span class="n">folders</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">folder</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">folder_name</span><span class="p">:</span>
                        <span class="n">folderID</span> <span class="o">=</span> <span class="n">folder</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
                        <span class="k">break</span>
                <span class="k">del</span> <span class="n">folders</span>


            <span class="k">if</span> <span class="n">folderID</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createFolder</span><span class="p">(</span><span class="n">folder_name</span><span class="p">)</span>
                <span class="k">if</span> <span class="s">&#39;success&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                    <span class="n">folderID</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s">&#39;folder&#39;</span><span class="p">][</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
            <span class="k">del</span> <span class="n">userContent</span>
            <span class="k">return</span> <span class="n">folderID</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.get_item_ID"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.get_item_ID">[docs]</a>    <span class="k">def</span> <span class="nf">get_item_ID</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item_name</span><span class="p">,</span><span class="n">item_type</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           This function retrieves the item ID if the item exist</span>

<span class="sd">           Inputs:</span>
<span class="sd">              item_name - the name of the item</span>

<span class="sd">           Output:</span>
<span class="sd">              string - ID of item, none if item does not exist</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">itemID</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">item_name</span> <span class="o">==</span> <span class="bp">None</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">item_name</span> <span class="o">==</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="n">userContent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getUserContent</span><span class="p">(</span><span class="n">folder</span><span class="o">=</span><span class="n">folder</span><span class="p">)</span>
            <span class="k">if</span> <span class="s">&#39;items&#39;</span> <span class="ow">in</span> <span class="n">userContent</span><span class="p">:</span>
                <span class="n">items</span> <span class="o">=</span> <span class="n">userContent</span><span class="p">[</span><span class="s">&#39;items&#39;</span><span class="p">]</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">items</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">item_name</span> <span class="ow">and</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;type&#39;</span><span class="p">]</span> <span class="ow">in</span> <span class="n">item_type</span><span class="p">:</span>
                        <span class="n">itemID</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s">&#39;id&#39;</span><span class="p">]</span>
                        <span class="k">break</span>
                <span class="k">del</span> <span class="n">items</span>

        <span class="k">return</span> <span class="n">itemID</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.createFeatureService"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.createFeatureService">[docs]</a>    <span class="k">def</span> <span class="nf">createFeatureService</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mxd</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">share_everyone</span><span class="p">,</span><span class="n">share_org</span><span class="p">,</span><span class="n">share_groups</span><span class="p">,</span><span class="n">capabilities</span><span class="p">,</span><span class="n">thumbnail</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">folder_name</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The createFeatureService function publishes a service definition,</span>
<span class="sd">           publishes a features service, sets the details, and shares it with</span>
<span class="sd">           the organization.</span>

<span class="sd">           Inputs:</span>
<span class="sd">              mxd - the name for the webmap</span>
<span class="sd">              title - the tags for the web map</span>
<span class="sd">              share_everyone - True/False to share map with everyone</span>
<span class="sd">              share_org - True/False to share map with Org</span>
<span class="sd">              share_groups - List of groups to share the map with</span>
<span class="sd">              thumbnail - optional, full path or absolute path to the image for the webmap</span>
<span class="sd">                200x133 is the suggested side.</span>
<span class="sd">              folderName - optional, folder name to store the item in</span>
<span class="sd">           Output:</span>
<span class="sd">              Dict - results from publishing the feature service</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">service_name</span> <span class="o">=</span> <span class="n">title</span>
        <span class="n">service_name_safe</span> <span class="o">=</span> <span class="n">service_name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;_&#39;</span><span class="p">)</span>
        <span class="n">service_name_safe</span> <span class="o">=</span> <span class="n">service_name_safe</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">,</span><span class="s">&#39;-&#39;</span><span class="p">)</span>


        <span class="n">folderID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_folder_ID</span><span class="p">(</span><span class="n">folder_name</span><span class="o">=</span><span class="n">folder_name</span><span class="p">)</span>

        <span class="n">items</span> <span class="o">=</span> <span class="p">[</span><span class="n">service_name</span><span class="p">,</span><span class="n">service_name_safe</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">delete_items</span><span class="p">(</span><span class="n">items</span><span class="o">=</span><span class="n">items</span><span class="p">,</span><span class="n">item_type</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;Feature Service&#39;</span><span class="p">,</span><span class="s">&#39;Service Definition&#39;</span><span class="p">],</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
        <span class="n">itemInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">publish_to_agol</span><span class="p">(</span><span class="n">mxd_path</span><span class="o">=</span><span class="n">mxd</span><span class="p">,</span><span class="n">service_name</span><span class="o">=</span><span class="n">service_name_safe</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">itemInfo</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">itemInfo</span>
        <span class="n">item_id</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="n">service_url</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>

        <span class="k">for</span> <span class="n">service</span> <span class="ow">in</span> <span class="n">itemInfo</span><span class="p">[</span><span class="s">&#39;services&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">service</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">service</span><span class="p">))</span>
            <span class="n">item_id</span> <span class="o">=</span> <span class="n">service</span><span class="p">[</span><span class="s">&#39;serviceItemId&#39;</span><span class="p">]</span>
            <span class="n">service_url</span> <span class="o">=</span> <span class="n">service</span><span class="p">[</span><span class="s">&#39;serviceurl&#39;</span><span class="p">]</span>
            <span class="n">service</span><span class="p">[</span><span class="s">&#39;folderId&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">folderID</span>

        <span class="n">group_ids</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_group_IDs</span><span class="p">(</span><span class="n">share_groups</span><span class="p">)</span>

        <span class="n">errors</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">enableSharing</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span> <span class="n">everyone</span><span class="o">=</span><span class="n">share_everyone</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span> <span class="s">&quot;true&quot;</span> <span class="p">,</span> <span class="n">orgs</span><span class="o">=</span> <span class="n">share_org</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">==</span> <span class="s">&quot;true&quot;</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">group_ids</span><span class="p">),</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s">&#39;error&#39;</span><span class="p">])</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateTitle</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span><span class="n">title</span><span class="o">=</span> <span class="n">service_name</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
        <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s">&#39;error&#39;</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">thumbnail</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">):</span>
                    <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>
                <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">updateThumbnail</span><span class="p">(</span><span class="n">agol_id</span><span class="o">=</span><span class="n">item_id</span><span class="p">,</span><span class="n">thumbnail</span><span class="o">=</span><span class="n">thumbnail</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="n">folderID</span><span class="p">)</span>
                <span class="k">if</span> <span class="s">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
                    <span class="n">errors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s">&#39;error&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">errors</span><span class="p">)</span><span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>

            <span class="n">itemInfo</span><span class="p">[</span><span class="s">&#39;errors&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="n">errors</span>
        <span class="k">return</span> <span class="n">itemInfo</span>
    <span class="c">#----------------------------------------------------------------------</span></div>
<div class="viewcode-block" id="AGOL.get_group_content"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.get_group_content">[docs]</a>    <span class="k">def</span> <span class="nf">get_group_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">groupID</span><span class="p">):</span>
        <span class="n">contentURL</span> <span class="o">=</span> <span class="s">&#39;{}/search&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">)</span>

        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span>
                      <span class="s">&#39;q&#39;</span><span class="p">:</span><span class="s">&#39;group:{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">groupID</span><span class="p">),</span>
                      <span class="s">&#39;num&#39;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
                      <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span>
                      <span class="p">}</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">query_dict</span><span class="p">[</span><span class="s">&#39;token&#39;</span><span class="p">]</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_get</span><span class="p">(</span><span class="n">contentURL</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span>
                                 <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>

    <span class="c">#----------------------------------------------------------------------</span></div>
    <span class="k">def</span> <span class="nf">_publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">agol_id</span><span class="p">,</span><span class="n">folder</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;&quot;&quot;&quot;</span>
        <span class="n">publishURL</span> <span class="o">=</span> <span class="s">&#39;{}/content/users/{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_url</span><span class="p">,</span>
                                                          <span class="bp">self</span><span class="o">.</span><span class="n">_username</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">folder</span><span class="p">:</span>
            <span class="n">publishURL</span> <span class="o">+=</span> <span class="s">&#39;/&#39;</span> <span class="o">+</span> <span class="n">folder</span>

        <span class="n">publishURL</span> <span class="o">+=</span> <span class="s">&#39;/publish&#39;</span>

        <span class="n">query_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;itemID&#39;</span><span class="p">:</span> <span class="n">agol_id</span><span class="p">,</span>
                      <span class="s">&#39;filetype&#39;</span><span class="p">:</span> <span class="s">&#39;serviceDefinition&#39;</span><span class="p">,</span>
                      <span class="s">&#39;f&#39;</span><span class="p">:</span> <span class="s">&#39;json&#39;</span><span class="p">,</span>
                      <span class="s">&#39;token&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span>
                      <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">publishURL</span><span class="p">,</span> <span class="n">query_dict</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                             <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>
    <span class="c">#----------------------------------------------------------------------</span>
<span class="c">##    def searchGroups(self,q=None, start=&#39;1&#39;,num=1000,sortField=&#39;&#39;,</span>
<span class="c">##               sortOrder=&#39;asc&#39;):</span>
<span class="c">##        query_dict = {</span>
<span class="c">##            &quot;f&quot; : &quot;json&quot;,</span>
<span class="c">##            &quot;token&quot; : self._token,</span>
<span class="c">##            &quot;q&quot;: q,</span>
<span class="c">##            &quot;start&quot;: start,</span>
<span class="c">##            &quot;num&quot;: num,</span>
<span class="c">##            &quot;sortField&quot;: sortField,</span>
<span class="c">##            &quot;sortOrder&quot;: sortOrder</span>
<span class="c">##        }</span>
<span class="c">##        groupsURL = self._url + &quot;community/groups&quot;</span>
<span class="c">##        return self._do_post(groupsURL, query_dict)</span>
    <span class="c">#----------------------------------------------------------------------</span>
<div class="viewcode-block" id="AGOL.createGroup"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.AGOL.createGroup">[docs]</a>    <span class="k">def</span> <span class="nf">createGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">description</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span>
                    <span class="n">snippet</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">phone</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">access</span><span class="o">=</span><span class="s">&quot;org&quot;</span><span class="p">,</span> <span class="n">sortField</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">sortOrder</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span>
                    <span class="n">isViewOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">isInvitationOnly</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                    <span class="n">thumbnail</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">           The Create Group operation creates a new group in the Portal</span>
<span class="sd">           community.</span>
<span class="sd">           Only authenticated users can create groups. The user who creates</span>
<span class="sd">           the group automatically becomes the owner of the group. The</span>
<span class="sd">           owner of the group is automatically an administrator of the</span>
<span class="sd">           group. The calling user provides the title for the group, while</span>
<span class="sd">           the group ID is generated by the system.</span>
<span class="sd">           Inputs:</span>
<span class="sd">              title - The group title must be unique for the username, and</span>
<span class="sd">                      the character limit is 250.</span>
<span class="sd">              description - A description of the group that can be any</span>
<span class="sd">                            length.</span>
<span class="sd">              tags - Tags are words or short phrases that describe the</span>
<span class="sd">                     group. Separate terms with commas.</span>
<span class="sd">              snippet - Snippet or summary of the group that has a</span>
<span class="sd">                        character limit of 250 characters.</span>
<span class="sd">              phone - Phone is the group contact information. It can be a</span>
<span class="sd">                      combination of letters and numbers. The character</span>
<span class="sd">                      limit is 250.</span>
<span class="sd">              access - sets the access level for the group. private is the</span>
<span class="sd">                       default. Setting to org restricts group access to</span>
<span class="sd">                       members of your organization. If public, all users</span>
<span class="sd">                       can access the group.</span>
<span class="sd">                       Values: private | org |public</span>
<span class="sd">              sortField - Sets sort field for group items.</span>
<span class="sd">              sortOrder - Sets sort order for group items.</span>
<span class="sd">              isViewOnly - Allows the group owner or admin to create</span>
<span class="sd">                           view-only groups where members are not able to</span>
<span class="sd">                           share items. If members try to share, view-only</span>
<span class="sd">                           groups are returned in the notshared response</span>
<span class="sd">                           property. false is the default.</span>
<span class="sd">              isInvitationOnly - If true, this group will not accept join</span>
<span class="sd">                                 requests. If false, this group does not</span>
<span class="sd">                                 require an invitation to join. Only group</span>
<span class="sd">                                 owners and admins can invite users to the</span>
<span class="sd">                                 group. false is the default.</span>
<span class="sd">              thumbnail - Enter the pathname to the thumbnail image to be</span>
<span class="sd">                          used for the group. The recommended image size is</span>
<span class="sd">                          200 pixels wide by 133 pixels high. Acceptable</span>
<span class="sd">                          image formats are PNG, GIF, and JPEG. The maximum</span>
<span class="sd">                          file size for an image is 1 MB. This is not a</span>
<span class="sd">                          reference to the file but the file itself, which</span>
<span class="sd">                          will be stored in the Portal.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;f&quot;</span> <span class="p">:</span> <span class="s">&quot;json&quot;</span><span class="p">,</span>
            <span class="s">&quot;token&quot;</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_token</span><span class="p">,</span>
            <span class="s">&quot;title&quot;</span> <span class="p">:</span> <span class="n">title</span><span class="p">,</span>
            <span class="s">&quot;description&quot;</span> <span class="p">:</span> <span class="n">description</span><span class="p">,</span>
            <span class="s">&quot;tags&quot;</span> <span class="p">:</span> <span class="n">tags</span><span class="p">,</span>
            <span class="s">&quot;access&quot;</span> <span class="p">:</span> <span class="n">access</span><span class="p">,</span>
            <span class="s">&quot;isViewOnly&quot;</span> <span class="p">:</span> <span class="n">isViewOnly</span><span class="p">,</span>
            <span class="s">&quot;isInvitationOnly&quot;</span> <span class="p">:</span> <span class="n">isInvitationOnly</span>
        <span class="p">}</span>
        <span class="n">uURL</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_url</span> <span class="o">+</span> <span class="s">&quot;/community/createGroup&quot;</span>
        <span class="k">if</span> <span class="n">snippet</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;snippet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">snippet</span>
        <span class="k">if</span> <span class="n">phone</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;phone&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">phone</span>
        <span class="k">if</span> <span class="n">sortField</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;sortField&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sortField</span>
        <span class="k">if</span> <span class="n">sortOrder</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">params</span><span class="p">[</span><span class="s">&#39;sortOrder&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sortOrder</span>
        <span class="k">if</span> <span class="n">thumbnail</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span> <span class="ow">and</span> \
           <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">):</span>

            <span class="n">params</span><span class="p">[</span><span class="s">&#39;thumbnail&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>
            <span class="n">content</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">,</span> <span class="s">&#39;rb&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">parsed</span> <span class="o">=</span> <span class="n">urlparse</span><span class="o">.</span><span class="n">urlparse</span><span class="p">(</span><span class="n">uURL</span><span class="p">)</span>

            <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s">&#39;thumbnail&#39;</span><span class="p">,</span> <span class="n">thumbnail</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)))</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post_multipart</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">hostname</span><span class="p">,</span>
                                        <span class="n">port</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">port</span><span class="p">,</span>
                                        <span class="n">selector</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">path</span><span class="p">,</span>
                                        <span class="n">fields</span><span class="o">=</span><span class="n">params</span><span class="p">,</span>
                                        <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                                        <span class="n">ssl</span><span class="o">=</span><span class="n">parsed</span><span class="o">.</span><span class="n">scheme</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s">&#39;https&#39;</span><span class="p">,</span>
                                        <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                        <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_do_post</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uURL</span><span class="p">,</span> <span class="n">param_dict</span><span class="o">=</span><span class="n">params</span><span class="p">,</span> <span class="n">proxy_port</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_port</span><span class="p">,</span>
                                 <span class="n">proxy_url</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_proxy_url</span><span class="p">)</span>




<span class="c"># This function is a workaround to deal with what&#39;s typically described as a</span>
<span class="c"># problem with the web server closing a connection. This is problem</span>
<span class="c"># experienced with www.arcgis.com (first encountered 12/13/2012). The problem</span>
<span class="c"># and workaround is described here:</span>
<span class="c"># http://bobrochel.blogspot.com/2010/11/bad-servers-chunked-encoding-and.html</span></div></div>
<div class="viewcode-block" id="patch_http_response_read"><a class="viewcode-back" href="../../../arcrest.agol.html#arcrest.agol.admin.patch_http_response_read">[docs]</a><span class="k">def</span> <span class="nf">patch_http_response_read</span><span class="p">(</span><span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">inner</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">httplib</span><span class="o">.</span><span class="n">IncompleteRead</span><span class="p">,</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">e</span><span class="o">.</span><span class="n">partial</span>

    <span class="k">return</span> <span class="n">inner</span></div>
<span class="n">httplib</span><span class="o">.</span><span class="n">HTTPResponse</span><span class="o">.</span><span class="n">read</span> <span class="o">=</span> <span class="n">patch_http_response_read</span><span class="p">(</span><span class="n">httplib</span><span class="o">.</span><span class="n">HTTPResponse</span><span class="o">.</span><span class="n">read</span><span class="p">)</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../../index.html">src  documentation</a> &raquo;</li>
          <li><a href="../../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Esri.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>